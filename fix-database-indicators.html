<!DOCTYPE html>
<html>
<head>
    <title>Fix Database Indicators</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .success { background: #e8f5e8; padding: 15px; margin: 10px 0; border-radius: 5px; border-left: 4px solid #4caf50; }
        .button { 
            background: #4caf50; 
            color: white; 
            border: none; 
            padding: 15px 30px; 
            margin: 10px; 
            border-radius: 5px; 
            cursor: pointer;
            font-size: 16px;
        }
        .button:hover { background: #45a049; }
    </style>
</head>
<body>
    <h1>üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</h1>
    
    <div class="success">
        <h3>üéØ –ü—Ä–æ–±–ª–µ–º–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ</h3>
        <p><strong>–ü—Ä–æ–±–ª–µ–º–∞:</strong> –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î</p>
        <p><strong>–ü—Ä–∏—á–∏–Ω–∞:</strong> –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏—â—É—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ localStorage, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ö–∞—Ä–¥–∫–æ–¥–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</p>
        <p><strong>–†–µ—à–µ–Ω–∏–µ:</strong> –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Supabase –≤ localStorage</p>
    </div>
    
    <button class="button" onclick="fixIndicators()">
        ‚úÖ –ò–°–ü–†–ê–í–ò–¢–¨ –ò–ù–î–ò–ö–ê–¢–û–†–´
    </button>
    
    <button class="button" onclick="openInstructions()" style="background: #2196f3;">
        üöÄ –û–¢–ö–†–´–¢–¨ –ò–ù–°–¢–†–£–ö–¶–ò–ò
    </button>
    
    <div id="status"></div>

    <script>
        function fixIndicators() {
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Supabase –≤ localStorage
            const supabaseSettings = {
                url: 'https://tohtryzyffcebtyvkxwh.supabase.co',
                apiKey: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRvaHRyeXp5ZmZjZWJ0eXZreHdoIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1Njg3NTQ0OCwiZXhwIjoyMDcyNDUxNDQ4fQ.kN6uF9YhJzbzu2ugHRQCyzuNOwawsTDtwelGO0uCjyY',
                serviceRoleKey: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRvaHRyeXp5ZmZjZWJ0eXZreHdoIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1Njg3NTQ0OCwiZXhwIjoyMDcyNDUxNDQ4fQ.kN6uF9YhJzbzu2ugHRQCyzuNOwawsTDtwelGO0uCjyY',
                connected: true,
                schema: 'public'
            };
            
            localStorage.setItem('externalDatabase', JSON.stringify(supabaseSettings));
            
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = `
                <div class="success">
                    <h3>‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!</h3>
                    <p><strong>–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ localStorage:</strong></p>
                    <pre>${JSON.stringify(supabaseSettings, null, 2)}</pre>
                    <p><strong>–†–µ–∑—É–ª—å—Ç–∞—Ç:</strong> –¢–µ–ø–µ—Ä—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –±—É–¥—É—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∑–µ–ª—ë–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö</p>
                    <p><strong>–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:</strong> –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–µ–ª—ë–Ω—ã–º–∏</p>
                </div>
            `;
            
            console.log('‚úÖ Database indicators fixed!');
        }
        
        function openInstructions() {
            window.open('http://localhost:3003/admin/instructions', '_blank');
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ localStorage –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', function() {
            const existing = localStorage.getItem('externalDatabase');
            if (existing) {
                const statusDiv = document.getElementById('status');
                statusDiv.innerHTML = `
                    <div class="success">
                        <h3>‚ÑπÔ∏è –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ localStorage</h3>
                        <pre>${existing}</pre>
                    </div>
                `;
            }
        });
    </script>
</body>
</html>