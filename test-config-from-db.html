<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏"</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1000px; margin: 0 auto; }
        .success { color: #155724; background: #d4edda; padding: 15px; border: 1px solid #c3e6cb; border-radius: 5px; margin: 10px 0; }
        .error { color: #721c24; background: #f8d7da; padding: 15px; border: 1px solid #f5c6cb; border-radius: 5px; margin: 10px 0; }
        .warning { color: #856404; background: #fff3cd; padding: 15px; border: 1px solid #ffeaa7; border-radius: 5px; margin: 10px 0; }
        .info { color: #0c5460; background: #d1ecf1; padding: 15px; border: 1px solid #bee5eb; border-radius: 5px; margin: 10px 0; }
        .card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin: 20px 0; }
        .config-display { background: #f8f9fa; padding: 15px; border-left: 4px solid #007bff; font-family: monospace; font-size: 14px; white-space: pre-wrap; }
        button { padding: 12px 24px; margin: 10px 5px; background: #007bff; color: white; border: none; cursor: pointer; border-radius: 5px; font-size: 16px; }
        button:hover { background: #0056b3; }
        button.danger { background: #dc3545; }
        button.danger:hover { background: #c82333; }
        button.success { background: #28a745; }
        button.success:hover { background: #218838; }
        .step { background: #e9ecef; padding: 15px; margin: 10px 0; border-left: 4px solid #6c757d; }
        .changes { background: #fff3cd; padding: 15px; border-left: 4px solid #ffc107; margin: 10px 0; }
        table { width: 100%; border-collapse: collapse; margin: 10px 0; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #f2f2f2; font-weight: bold; }
        .old-value { color: #dc3545; text-decoration: line-through; }
        .new-value { color: #28a745; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß –¢–µ—Å—Ç: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏"</h1>
        
        <div class="changes">
            <h3>üìã –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ –≤ –∫–æ–¥–µ:</h3>
            <table>
                <tr>
                    <th>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç</th>
                    <th>–°—Ç–∞—Ä–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ</th>
                    <th>–ù–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ</th>
                </tr>
                <tr>
                    <td><strong>universalHttpClient</strong></td>
                    <td class="old-value">getConfigSync() + fallback –∑–Ω–∞—á–µ–Ω–∏—è</td>
                    <td class="new-value">await getConfig() + —Å—Ç—Ä–æ–≥–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏</td>
                </tr>
                <tr>
                    <td><strong>defaultConfig</strong></td>
                    <td class="old-value">baseUrl: 'https://pos.autooplata.ru/tms'<br>apiKey: 'eyJhbGci...'</td>
                    <td class="new-value">baseUrl: ''<br>apiKey: '' (–ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏)</td>
                </tr>
                <tr>
                    <td><strong>–û—à–∏–±–∫–∏</strong></td>
                    <td class="old-value">–ú–æ–ª—á–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è</td>
                    <td class="new-value">–í—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç —á–µ—Ç–∫–∏–µ –æ—à–∏–±–∫–∏</td>
                </tr>
            </table>
        </div>

        <div class="warning">
            <h3>‚ö†Ô∏è –í–ê–ñ–ù–û: –¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞!</h3>
            <p>–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π <strong>–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ</strong> –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ —Ä–∞–∑–¥–µ–ª–µ "–û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏", –∏–Ω–∞—á–µ –±—É–¥—É—Ç –æ—à–∏–±–∫–∏!</p>
        </div>

        <div class="step">
            <h3>üìù –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</h3>
            <ol>
                <li><button onclick="window.open('http://localhost:3001/settings/database', '_blank')">üåê –û—Ç–∫—Ä—ã—Ç—å "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"</button></li>
                <li>–ù–∞–π—Ç–∏ —Å–µ–∫—Ü–∏—é <strong>"–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–æ—Ä–≥–æ–≤–æ–π —Å–µ—Ç–∏"</strong> (–≤–Ω–∏–∑—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã)</li>
                <li>–ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª—è:
                    <ul>
                        <li><strong>–ë–∞–∑–æ–≤—ã–π URL:</strong> https://pos.autooplata.ru/tms</li>
                        <li><strong>–¢–∏–ø –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:</strong> Bearer Token</li>
                        <li><strong>API –∫–ª—é—á:</strong> eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJsb2dpbiI6eyJpZCI6IkFDQ0FFNDA4LTYzMzItNDI0NS04NUIxLTI1RjkxNEYzQkQ2NCIsIm5hbWUiOiJVc2VyVGVzdCIsInJvbGUiOjB9LCJ1c2VyIjp7ImlkIjoiQUNDQUU0MDgtNjMzMi00MjQ1LTg1QjEtMjVGOTE0RjNCRDY0IiwibmFtZSI6IlVzZXJUZXN0In0sImV4cCI6MTc1NzE1NzkzN30.7fDPBwtWej80K2ePRXYKXsJH3b3pLSUqtjo2uIbyXEE</li>
                    </ul>
                </li>
                <li>–í–∫–ª—é—á–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é (–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å <strong>"–í–∫–ª—é—á–∏—Ç—å"</strong>)</li>
                <li>–ù–∞–∂–∞—Ç—å <strong>"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"</strong></li>
                <li><button onclick="testAfterConfig()">üß™ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –æ–ø–µ—Ä–∞—Ü–∏–π</button></li>
            </ol>
        </div>

        <div class="info">
            <h3>üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:</h3>
            
            <h4>‚úÖ –ï—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –°–û–•–†–ê–ù–ï–ù–´ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:</h4>
            <div class="config-display">
üåê HTTP GET https://pos.autooplata.ru/tms/v1/transactions?system=15&station=4...
üîê Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏"
            </div>

            <h4>‚ùå –ï—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ù–ï –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:</h4>
            <div class="config-display">
‚ùå Error: –ë–∞–∑–æ–≤—ã–π URL –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ API –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –µ–≥–æ –≤ —Ä–∞–∑–¥–µ–ª–µ "–û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏"
‚ùå Error: API –∫–ª—é—á –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –µ–≥–æ –≤ —Ä–∞–∑–¥–µ–ª–µ "–û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏"
            </div>
        </div>

        <div class="card">
            <h3>üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:</h3>
            <p>–ï—Å–ª–∏ –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—à–∏–±–∫–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:</p>
            <ul>
                <li>–°–µ–∫—Ü–∏—è "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–æ—Ä–≥–æ–≤–æ–π —Å–µ—Ç–∏" –≤–∏–¥–Ω–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫</li>
                <li>–í—Å–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ</li>
                <li>–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "–í–∫–ª—é—á–∏—Ç—å" –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω</li>
                <li>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã (–Ω–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")</li>
                <li>–í –∫–æ–Ω—Å–æ–ª–∏ –Ω–µ—Ç –æ—à–∏–±–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è</li>
            </ul>
        </div>

        <div class="success">
            <h3>üéâ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:</h3>
            <ul>
                <li>‚úÖ <strong>–ì–∏–±–∫–æ—Å—Ç—å:</strong> –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å</li>
                <li>‚úÖ <strong>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:</strong> –ù–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥–Ω—ã—Ö –∫–ª—é—á–µ–π –≤ –∫–æ–¥–µ</li>
                <li>‚úÖ <strong>–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å:</strong> –ß–µ—Ç–∫–∏–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ</li>
                <li>‚úÖ <strong>–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:</strong> –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –∏–∑ CLAUDE.md</li>
            </ul>
        </div>

        <div>
            <h3>üöÄ –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏:</h3>
            <button onclick="window.open('http://localhost:3001/settings/database', '_blank')">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            <button onclick="window.open('http://localhost:3001/network/operations-transactions', '_blank')">üìä –û–ø–µ—Ä–∞—Ü–∏–∏</button>
            <button onclick="window.open('http://localhost:3001', '_blank')">üè† –ì–ª–∞–≤–Ω–∞—è</button>
        </div>
    </div>

    <script>
        function testAfterConfig() {
            alert('–¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–û–ø–µ—Ä–∞—Ü–∏–∏" –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏!\n\n–ï—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –≤—ã –Ω–µ —É–≤–∏–¥–∏—Ç–µ –æ—à–∏–±–æ–∫ —Ç–∏–ø–∞ "–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω".');
            window.open('http://localhost:3001/network/operations-transactions', '_blank');
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        fetch('http://localhost:3001')
            .then(response => {
                if (response.ok) {
                    const status = document.createElement('div');
                    status.className = 'success';
                    status.innerHTML = '<p>‚úÖ <strong>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ:</strong> http://localhost:3001</p>';
                    document.querySelector('.container').appendChild(status);
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
            })
            .catch(err => {
                const status = document.createElement('div');
                status.className = 'error';
                status.innerHTML = `<p>‚ùå <strong>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ:</strong> ${err.message}</p>`;
                document.querySelector('.container').appendChild(status);
            });
    </script>
</body>
</html>