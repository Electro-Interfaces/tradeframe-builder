<!DOCTYPE html>
<html>
<head>
    <title>Test Terminal Info Display</title>
</head>
<body>
    <h1>Проверка отображения данных терминала из API</h1>
    <p>Проверяем правильность маппинга данных из /v2/info</p>
    
    <script>
        // Данные из API (которые вы показали)
        const apiResponse = [
          {
            "system": 15,
            "station": 4,
            "shift": {
              "number": 12,
              "state": "Открытая"
            },
            "pos": [
              {
                "number": 1,
                "dt_info": "2025-09-09T17:27:29",
                "uptime": "2025-09-09T14:27:23",
                "shift": {
                  "number": 12,
                  "state": "Открытая",
                  "dt_open": "2025-09-09T00:01:19"
                },
                "devices": [
                  {
                    "params": [
                      {
                        "name": "Состояние",
                        "value": "OK"
                      }
                    ],
                    "id": 1,
                    "name": "Фискальный регистратор"
                  },
                  {
                    "params": [
                      {
                        "name": "Состояние",
                        "value": "OK"
                      }
                    ],
                    "id": 10,
                    "name": "Купюроприемник"
                  },
                  {
                    "params": [
                      {
                        "name": "Состояние",
                        "value": "OK"
                      }
                    ],
                    "id": 11,
                    "name": "Картридер"
                  },
                  {
                    "params": [
                      {
                        "name": "Состояние",
                        "value": "OK"
                      }
                    ],
                    "id": 12,
                    "name": "МПС-ридер"
                  }
                ]
              }
            ]
          }
        ];

        // Как должны выглядеть данные после маппинга
        const data = apiResponse[0];
        const posData = data.pos[0];
        const shiftData = data.shift || posData.shift;
        
        console.log("=== ДАННЫЕ ИЗ API ===");
        console.log("System:", data.system); // 15
        console.log("Station:", data.station); // 4
        console.log("POS Number:", posData.number); // 1
        console.log("POS dt_info:", posData.dt_info); // "2025-09-09T17:27:29"
        console.log("Shift state:", shiftData.state); // "Открытая"
        console.log("Shift number:", shiftData.number); // 12
        
        console.log("\n=== КАК ДОЛЖНО ОТОБРАЖАТЬСЯ ===");
        console.log("АЗС:");
        console.log("  - Станция: АЗС 4");
        console.log("  - ID системы: 15-4");
        console.log("  - Обновлено:", new Date(posData.dt_info).toLocaleTimeString('ru-RU'));
        
        console.log("\nPOS терминал:");
        console.log("  - Статус: Онлайн"); // так как есть dt_info
        console.log("  - Номер: POS 1");
        console.log("  - Смена открыта: ✓"); // так как state === "Открытая"
        
        console.log("\nСмена:");
        console.log("  - Номер: №12");
        console.log("  - Состояние: Открытая");
        console.log("  - Открыта:", new Date(posData.shift.dt_open).toLocaleString('ru-RU'));
        
        // Перенаправление на страницу Equipment через 3 секунды
        setTimeout(() => {
            window.location.href = 'http://localhost:3001/equipment';
        }, 3000);
    </script>
</body>
</html>