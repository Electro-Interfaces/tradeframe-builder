# üìä –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –ø–æ –≤–∏–¥–∞–º —Ç–æ–ø–ª–∏–≤–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ —Å—Ö–µ–º—ã –ë–î

### ‚úÖ –ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (7 –∏–∑ 7):
- üè∑Ô∏è **fuel_types** - 8 –∑–∞–ø–∏—Å–µ–π ‚úÖ
- üìã **nomenclature** - 5 –∑–∞–ø–∏—Å–µ–π ‚úÖ  
- üîó **nomenclature_external_codes** - 7 –∑–∞–ø–∏—Å–µ–π ‚úÖ
- üõ¢Ô∏è **tanks** - 8 –∑–∞–ø–∏—Å–µ–π ‚úÖ
- üè™ **trading_points** - 6 –∑–∞–ø–∏—Å–µ–π ‚úÖ
- üåê **networks** - 2 –∑–∞–ø–∏—Å–∏ ‚úÖ
- ‚ùå **prices** - –¢–∞–±–ª–∏—Ü–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ ‚ö†Ô∏è

## üî• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. ‚ùå **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ç–∞–±–ª–∏—Ü–∞ prices**
- **–ü—Ä–æ–±–ª–µ–º–∞:** –¢–∞–±–ª–∏—Ü–∞ `prices` –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
- **–í–ª–∏—è–Ω–∏–µ:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –ø–æ–ª—É—á–∏—Ç—å —Ü–µ–Ω—ã –Ω–∞ —Ç–æ–ø–ª–∏–≤–æ
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –µ—ë

### 2. ‚ö†Ô∏è **–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Å–≤—è–∑–∏ –≤ tanks**
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í —Ç–∞–±–ª–∏—Ü–µ `tanks` –ø–æ–ª–µ `fuel_type_id` = null —É –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π
- **–û–∂–∏–¥–∞–ª–æ—Å—å:** –°—Å—ã–ª–∫–∏ –Ω–∞ `fuel_types.id`
- **–¢–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ:**
  ```
  –†–µ–∑–µ—Ä–≤—É–∞—Ä ‚Ññ1 (–ê–ò-95) ‚Üí fuel_type_id: null
  –†–µ–∑–µ—Ä–≤—É–∞—Ä ‚Ññ2 (–ê–ò-92) ‚Üí fuel_type_id: null  
  –†–µ–∑–µ—Ä–≤—É–∞—Ä ‚Ññ3 (–î–¢) ‚Üí fuel_type_id: null
  ```

### 3. üîÑ **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö**

**–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å:**
```
fuel_types (—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫)
‚îú‚îÄ‚îÄ id: UUID (PK)
‚îú‚îÄ‚îÄ name: "–ê–ò-95", "–ê–ò-92", "–î–¢"
‚îî‚îÄ‚îÄ code: "AI95", "AI92", "DT"

tanks (—Ä–µ–∑–µ—Ä–≤—É–∞—Ä—ã)
‚îú‚îÄ‚îÄ id: UUID (PK)
‚îú‚îÄ‚îÄ fuel_type_id: UUID (FK ‚Üí fuel_types.id) ‚ùå —Å–µ–π—á–∞—Å null
‚îî‚îÄ‚îÄ trading_point_id: UUID (FK ‚Üí trading_points.id)

prices (—Ü–µ–Ω—ã)
‚îú‚îÄ‚îÄ id: UUID (PK)
‚îú‚îÄ‚îÄ fuel_type_id: UUID (FK ‚Üí fuel_types.id)
‚îú‚îÄ‚îÄ trading_point_id: UUID (FK ‚Üí trading_points.id)
‚îî‚îÄ‚îÄ price_gross: number
```

## üìã –î–µ—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### üè∑Ô∏è **fuel_types** (8 –∑–∞–ø–∏—Å–µ–π) ‚úÖ
**–í–∏–¥—ã —Ç–æ–ø–ª–∏–≤–∞ –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ:**
- –ê–ò-92 (AI92, –ë–µ–Ω–∑–∏–Ω, –æ–∫—Ç–∞–Ω–æ–≤–æ–µ —á–∏—Å–ª–æ: 92)
- –ê–ò-95 (AI95, –ë–µ–Ω–∑–∏–Ω, –æ–∫—Ç–∞–Ω–æ–≤–æ–µ —á–∏—Å–ª–æ: 95) 
- –ê–ò-98 (AI98, –ë–µ–Ω–∑–∏–Ω, –æ–∫—Ç–∞–Ω–æ–≤–æ–µ —á–∏—Å–ª–æ: 98)
- –î–¢ (DT, –î–∏–∑–µ–ª—å)
- –ì–∞–∑ (GAS, –ì–∞–∑)
- –î–¢ –ó–∏–º–Ω–µ–µ (DT_WINTER, –î–∏–∑–µ–ª—å)
- –î–¢ –ê—Ä–∫—Ç–∏—á–µ—Å–∫–æ–µ (DT_ARCTIC, –î–∏–∑–µ–ª—å)
- AdBlue (ADBLUE, –ü—Ä–∏—Å–∞–¥–∫–∞)

### üìã **nomenclature** (5 –∑–∞–ø–∏—Å–µ–π) ‚úÖ
**–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ –ø–æ —Å–µ—Ç—è–º:**
- –ê–ò-92 (AI92) ‚Üí network: –î–µ–º–æ —Å–µ—Ç—å –ê–ó–°
- –ê–ò-95 (AI95) ‚Üí network: –î–µ–º–æ —Å–µ—Ç—å –ê–ó–°  
- –ê–ò-98 (AI98) ‚Üí network: –î–µ–º–æ —Å–µ—Ç—å –ê–ó–°
- –î–¢ (DT) ‚Üí network: –î–µ–º–æ —Å–µ—Ç—å –ê–ó–°
- –ê–ò-95 –ü—Ä–µ–º–∏—É–º (AI95_PREMIUM) ‚Üí network: –ù–æ—Ä–¥ –õ–∞–π–Ω

### üõ¢Ô∏è **tanks** (8 —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–æ–≤) ‚ö†Ô∏è
**–ü—Ä–æ–±–ª–µ–º–∞:** –í—Å–µ `fuel_type_id = null`
```
–†–µ–∑–µ—Ä–≤—É–∞—Ä ‚Ññ1 (–ê–ò-95) ‚Üí fuel_type_id: null ‚ùå
–†–µ–∑–µ—Ä–≤—É–∞—Ä ‚Ññ2 (–ê–ò-92) ‚Üí fuel_type_id: null ‚ùå
–†–µ–∑–µ—Ä–≤—É–∞—Ä ‚Ññ3 (–î–¢) ‚Üí fuel_type_id: null ‚ùå
```

### üè™ **trading_points** (6 —Ç–æ—á–µ–∫) ‚úÖ
- –ê–ó–° ‚Ññ001 - –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è (–ù–µ–≤—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç)
- –ê–ó–° ‚Ññ002 - –°–µ–≤–µ—Ä–Ω–∞—è (–ø—Ä. –≠–Ω–≥–µ–ª—å—Å–∞)  
- –ê–ó–° ‚Ññ003 - –Æ–∂–Ω–∞—è (–ú–æ—Å–∫–æ–≤—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç)
- –ê–ó–° ‚Ññ004 - –í–æ—Å—Ç–æ—á–Ω–∞—è
- –ê–ó–° ‚Ññ005 - –ó–∞–ø–∞–¥–Ω–∞—è
- –ê–ó–° ‚Ññ006 - –ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω–∞—è

## üîß –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–°–æ–∑–¥–∞—Ç—å/–ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É prices**
```sql
CREATE TABLE IF NOT EXISTS prices (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    trading_point_id UUID REFERENCES trading_points(id),
    fuel_type_id UUID REFERENCES fuel_types(id),
    price_net INTEGER NOT NULL, -- –≤ –∫–æ–ø–µ–π–∫–∞—Ö
    price_gross INTEGER NOT NULL, -- –≤ –∫–æ–ø–µ–π–∫–∞—Ö
    vat_rate DECIMAL(5,2) DEFAULT 20.00,
    valid_from TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    valid_to TIMESTAMP WITH TIME ZONE,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### 2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–≤—è–∑–∏ –≤ tanks**
```sql
-- –û–±–Ω–æ–≤–∏—Ç—å —Ä–µ–∑–µ—Ä–≤—É–∞—Ä—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ fuel_type_id
UPDATE tanks SET fuel_type_id = (
    SELECT id FROM fuel_types WHERE name = '–ê–ò-95' LIMIT 1
) WHERE name LIKE '%–ê–ò-95%';

UPDATE tanks SET fuel_type_id = (
    SELECT id FROM fuel_types WHERE name = '–ê–ò-92' LIMIT 1  
) WHERE name LIKE '%–ê–ò-92%';

UPDATE tanks SET fuel_type_id = (
    SELECT id FROM fuel_types WHERE name = '–î–¢' LIMIT 1
) WHERE name LIKE '%–î–¢%';
```

### 3. **–°–æ–∑–¥–∞—Ç—å –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –¥–ª—è prices**
```sql
-- –î–æ–±–∞–≤–∏—Ç—å —Ü–µ–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–æ—Ä–≥–æ–≤–æ–π —Ç–æ—á–∫–∏ –∏ –≤–∏–¥–∞ —Ç–æ–ø–ª–∏–≤–∞
INSERT INTO prices (trading_point_id, fuel_type_id, price_net, price_gross)
SELECT 
    tp.id as trading_point_id,
    ft.id as fuel_type_id,
    CASE ft.name 
        WHEN '–ê–ò-92' THEN 5500  -- 55.00 —Ä—É–± –Ω–µ—Ç—Ç–æ
        WHEN '–ê–ò-95' THEN 5800  -- 58.00 —Ä—É–± –Ω–µ—Ç—Ç–æ  
        WHEN '–ê–ò-98' THEN 6200  -- 62.00 —Ä—É–± –Ω–µ—Ç—Ç–æ
        WHEN '–î–¢' THEN 5200     -- 52.00 —Ä—É–± –Ω–µ—Ç—Ç–æ
        ELSE 5000
    END as price_net,
    CASE ft.name 
        WHEN '–ê–ò-92' THEN 6600  -- 66.00 —Ä—É–± —Å –ù–î–°
        WHEN '–ê–ò-95' THEN 6960  -- 69.60 —Ä—É–± —Å –ù–î–°
        WHEN '–ê–ò-98' THEN 7440  -- 74.40 —Ä—É–± —Å –ù–î–°  
        WHEN '–î–¢' THEN 6240     -- 62.40 —Ä—É–± —Å –ù–î–°
        ELSE 6000
    END as price_gross
FROM trading_points tp
CROSS JOIN fuel_types ft
WHERE ft.name IN ('–ê–ò-92', '–ê–ò-95', '–ê–ò-98', '–î–¢')
AND ft.is_active = true;
```

## üéØ –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### ‚ùå **–¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:**
1. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ü–µ–Ω:** –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ç–∞–±–ª–∏—Ü—ã `prices`
2. **–°–≤—è–∑—å —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–æ–≤:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø —Ç–æ–ø–ª–∏–≤–∞ –≤ —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–µ
3. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:** –ù–∞—Ä—É—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–≤—è–∑–∏ —Ç–æ–ø–ª–∏–≤–∞ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

### ‚úÖ **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
1. **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å–≤—è–∑—å:** fuel_types ‚Üê tanks ‚Üê trading_points  
2. **–†–∞–±–æ—á–∏–µ —Ü–µ–Ω—ã:** fuel_types ‚Üê prices ‚Üê trading_points
3. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è:** –í–∏–¥—ã —Ç–æ–ø–ª–∏–≤–∞ –±–µ—Ä—É—Ç—Å—è –∏–∑ —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–æ–≤ —Ç–æ—Ä–≥–æ–≤–æ–π —Ç–æ—á–∫–∏

## üö® –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å: –í–´–°–û–ö–ê–Ø
–ë–µ–∑ —ç—Ç–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å —Ü–µ–Ω–∞–º–∏ –∏ —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–∞–º–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ –±—É–¥–µ—Ç.

## üìã –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å/—Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `prices`
2. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å `fuel_type_id` –≤ —Ç–∞–±–ª–∏—Ü–µ `tanks`  
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ —Ü–µ–Ω
4. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏
5. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É