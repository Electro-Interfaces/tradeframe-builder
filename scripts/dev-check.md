# Руководство по тестированию CRUD для сетей

Этот документ содержит пошаговое руководство для ручной проверки всех функций управления торговыми сетями на странице `/admin/networks`.

## Предварительные условия

1. Убедитесь, что dev-сервер запущен: `npm run dev`
2. Откройте браузер и перейдите по адресу: `http://localhost:8081/admin/networks`
3. Убедитесь, что страница загружается без ошибок

## Тест-кейсы

### 1. Создание сети ✅

**Шаги:**
1. Нажмите кнопку **"+ Создать сеть"**
2. Заполните форму:
   - **Название сети**: "Тестовая сеть" (обязательное поле)
   - **Описание**: "Описание тестовой сети"
   - **Тип сети**: Выберите "АЗС" из dropdown
3. Нажмите **"Создать"**

**Ожидаемый результат:**
- ✅ Появится toast-уведомление "Сеть создана"
- ✅ Новая сеть появится в таблице сетей с `pointsCount = 0`
- ✅ Новая сеть будет автоматически выбрана (выделена)
- ✅ Диалог создания закроется

**Проверка ошибок:**
- Попробуйте создать сеть без названия → должна появиться ошибка валидации

### 2. Редактирование сети ✅

**Шаги:**
1. В строке любой сети нажмите **⋯** (троеточие)
2. Выберите **"Редактировать"** из dropdown меню
3. Измените данные:
   - Измените название на "Обновленная сеть"
   - Измените описание
   - Измените тип сети
4. Нажмите **"Сохранить"**

**Ожидаемый результат:**
- ✅ Появится toast-уведомление "Сеть обновлена"
- ✅ Изменения отобразятся в таблице сетей
- ✅ Диалог редактирования закроется
- ✅ `pointsCount` остается неизменным

### 3. Удаление сети с каскадом ✅

**Шаги:**
1. В строке любой сети нажмите **⋯** (троеточие) 
2. Выберите **"Удалить"** из dropdown меню
3. В диалоге подтверждения прочитайте текст: *"Вы действительно хотите удалить сеть "[название]" и все её торговые точки? Это действие необратимо."*
4. Нажмите **"Удалить"**

**Ожидаемый результат:**
- ✅ Появится toast-уведомление "Сеть и её торговые точки удалены"
- ✅ Сеть исчезнет из таблицы
- ✅ Если сеть была выбрана справа, выбор переключится на первую оставшуюся сеть
- ✅ Связанные торговые точки также удалятся (каскадное удаление)

**Проверка отмены:**
- Повторите шаги 1-3, но нажмите **"Отмена"** → сеть не должна удалиться

### 4. Подсчет количества точек ✅

**Проверка:**
1. Посмотрите колонку **"ТОЧЕК"** в таблице сетей
2. Сравните с количеством торговых точек в правой панели при выборе сети

**Ожидаемый результат:**
- ✅ `pointsCount` корректно отображает количество торговых точек для каждой сети
- ✅ При создании новой сети `pointsCount = 0`
- ✅ При удалении сети точки также удаляются

### 5. UX и состояния загрузки ✅

**Проверка состояний загрузки:**
1. При создании сети кнопка должна показывать "Создание..." и быть заблокированной
2. При редактировании кнопка ⋯ должна быть заблокирована для этой строки
3. При удалении кнопка диалога должна показывать "Выполнение..."

**Проверка Empty State:**
1. Удалите все сети
2. Должно появиться сообщение "Нет торговых сетей" с кнопкой создания

**Ожидаемый результат:**
- ✅ Все операции показывают индикаторы загрузки
- ✅ Кнопки блокируются во время операций
- ✅ При отсутствии сетей показывается подходящий Empty State

### 6. Responsive дизайн ✅

**Проверка на мобильных устройствах:**
1. Откройте Developer Tools (F12)
2. Переключите на мобильный режим
3. Проверьте, что таблицы заменяются на карточки
4. Все функции (создание, редактирование, удаление) должны работать

**Ожидаемый результат:**
- ✅ На мобильных устройствах показываются карточки вместо таблиц
- ✅ Все действия доступны через ⋯ меню в карточках
- ✅ Диалоги корректно отображаются на мобильных экранах

## Проверка ошибок

### Обработка ошибок API
1. Отключите интернет или остановите dev-сервер
2. Попробуйте создать/редактировать/удалить сеть
3. Должны появиться toast-уведомления об ошибках

### Валидация форм
1. Попробуйте создать сеть с пустым названием
2. Должно появиться сообщение об ошибке валидации

## Финальная проверка

После выполнения всех тестов убедитесь, что:
- ✅ Страница работает без ошибок в консоли
- ✅ Все CRUD операции работают корректно
- ✅ Toast-уведомления появляются для всех действий
- ✅ Состояния загрузки отображаются корректно
- ✅ Каскадное удаление работает
- ✅ Responsive дизайн функционирует
- ✅ Empty state отображается правильно

## Дополнительные проверки

### Performance
- Операции должны выполняться быстро (симуляция API ~100-200ms)
- Нет визуальных задержек при переключении между сетями

### Accessibility
- Все интерактивные элементы доступны через клавиатуру
- Dropdown меню открываются по клику и закрываются при потере фокуса

---

**Примечание:** Все данные хранятся в памяти и сбрасываются при перезагрузке страницы. Это ожидаемое поведение для mock-версии.