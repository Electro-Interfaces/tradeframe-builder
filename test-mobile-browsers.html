<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>–¢–µ—Å—Ç –º–æ–±–∏–ª—å–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤ - TradeFrame</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0f172a;
            color: #e2e8f0;
            padding: 1rem;
            min-height: 100vh;
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 1rem;
            background: #1e293b;
            border-radius: 0.5rem;
            border: 1px solid #334155;
        }
        
        .test-section {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .test-item {
            background: #334155;
            padding: 1rem;
            border-radius: 0.375rem;
            text-align: center;
        }
        
        .status-pass { background: #166534; }
        .status-fail { background: #991b1b; }
        .status-warn { background: #a16207; }
        
        button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem;
            cursor: pointer;
            font-size: 1rem;
            margin: 0.5rem;
            min-height: 44px;
            min-width: 120px;
        }
        
        button:hover {
            background: #2563eb;
        }
        
        button:disabled {
            background: #475569;
            cursor: not-allowed;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .info-item {
            background: #475569;
            padding: 1rem;
            border-radius: 0.375rem;
        }
        
        .info-label {
            font-weight: bold;
            color: #94a3b8;
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
        }
        
        .info-value {
            font-family: monospace;
            color: #e2e8f0;
        }
        
        .log {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 0.375rem;
            padding: 1rem;
            margin-top: 1rem;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.875rem;
        }
        
        .log-entry {
            margin-bottom: 0.5rem;
            padding: 0.25rem;
            border-left: 3px solid #475569;
            padding-left: 0.75rem;
        }
        
        .log-info { border-left-color: #3b82f6; }
        .log-success { border-left-color: #10b981; }
        .log-warning { border-left-color: #f59e0b; }
        .log-error { border-left-color: #ef4444; }
        
        @media (max-width: 768px) {
            body {
                padding: 0.5rem;
                font-size: 14px;
            }
            
            .test-grid {
                grid-template-columns: 1fr;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* iOS fixes */
        @supports (-webkit-touch-callout: none) {
            body {
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -webkit-tap-highlight-color: transparent;
            }
        }
        
        /* Android fixes */
        @media screen and (max-width: 768px) {
            button {
                font-size: 16px; /* Prevent zoom on iOS */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîß –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–±–∏–ª—å–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤</h1>
            <p>–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ TradeFrame</p>
        </div>

        <div class="test-section">
            <h2>üì± –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±—Ä–∞—É–∑–µ—Ä–µ</h2>
            <div class="info-grid" id="browser-info">
                <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è JavaScript -->
            </div>
        </div>

        <div class="test-section">
            <h2>üß™ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã</h2>
            <button onclick="runAllTests()" id="test-btn">–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã</button>
            <div class="test-grid" id="test-results">
                <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è JavaScript -->
            </div>
        </div>

        <div class="test-section">
            <h2>üéØ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã</h2>
            <button onclick="testVibration()">–¢–µ—Å—Ç –≤–∏–±—Ä–∞—Ü–∏–∏</button>
            <button onclick="testTouch()">–¢–µ—Å—Ç –∫–∞—Å–∞–Ω–∏–π</button>
            <button onclick="testOrientation()">–¢–µ—Å—Ç –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏</button>
            <button onclick="testViewport()">–¢–µ—Å—Ç viewport</button>
            <button onclick="openApp()">–û—Ç–∫—Ä—ã—Ç—å TradeFrame</button>
        </div>

        <div class="test-section">
            <h2>üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</h2>
            <div class="info-grid" id="performance-info">
                <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è JavaScript -->
            </div>
        </div>

        <div id="log" class="log" style="display: none;">
            <h3>–õ–æ–≥ —Å–æ–±—ã—Ç–∏–π:</h3>
            <div id="log-content"></div>
        </div>
    </div>

    <script>
        let logVisible = false;
        
        function log(message, type = 'info') {
            console.log(`[${type.toUpperCase()}] ${message}`);
            
            if (!logVisible) {
                document.getElementById('log').style.display = 'block';
                logVisible = true;
            }
            
            const logContent = document.getElementById('log-content');
            const entry = document.createElement('div');
            entry.className = `log-entry log-${type}`;
            entry.innerHTML = `<span style="color: #64748b;">[${new Date().toLocaleTimeString()}]</span> ${message}`;
            logContent.appendChild(entry);
            logContent.scrollTop = logContent.scrollHeight;
        }

        function detectBrowser() {
            const ua = navigator.userAgent;
            const vendor = navigator.vendor || '';
            
            let browser = 'Unknown';
            let version = '0.0';
            let platform = 'unknown';
            
            // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞
            if (ua.includes('SamsungBrowser')) {
                browser = 'Samsung Internet';
                version = ua.match(/SamsungBrowser\/([\d.]+)/)?.[1] || '0.0';
            } else if (ua.includes('MiuiBrowser')) {
                browser = 'MIUI Browser';
                version = ua.match(/MiuiBrowser\/([\d.]+)/)?.[1] || '0.0';
            } else if (ua.includes('HuaweiBrowser')) {
                browser = 'Huawei Browser';
                version = ua.match(/HuaweiBrowser\/([\d.]+)/)?.[1] || '0.0';
            } else if (ua.includes('UCBrowser')) {
                browser = 'UC Browser';
                version = ua.match(/UCBrowser\/([\d.]+)/)?.[1] || '0.0';
            } else if (ua.includes('YaBrowser')) {
                browser = 'Yandex Browser';
                version = ua.match(/YaBrowser\/([\d.]+)/)?.[1] || '0.0';
            } else if (ua.includes('Chrome') && !ua.includes('Edg')) {
                browser = 'Chrome';
                version = ua.match(/Chrome\/([\d.]+)/)?.[1] || '0.0';
                if (ua.includes('wv')) {
                    browser = 'Android WebView';
                }
            } else if (ua.includes('Firefox')) {
                browser = 'Firefox';
                version = ua.match(/Firefox\/([\d.]+)/)?.[1] || '0.0';
            } else if (ua.includes('Safari') && !ua.includes('Chrome')) {
                browser = 'Safari';
                version = ua.match(/Version\/([\d.]+)/)?.[1] || '0.0';
                if (ua.includes('Mobile') && !ua.includes('Safari')) {
                    browser = 'iOS WebView';
                }
            } else if (ua.includes('Edg')) {
                browser = 'Edge';
                version = ua.match(/Edg\/([\d.]+)/)?.[1] || '0.0';
            }
            
            // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
            if (/iPad|iPhone|iPod/.test(ua)) {
                platform = 'iOS';
            } else if (/Android/.test(ua)) {
                platform = 'Android';
            } else if (/Windows/.test(ua)) {
                platform = 'Windows';
            } else if (/Mac/.test(ua)) {
                platform = 'macOS';
            }
            
            return { browser, version, platform, userAgent: ua };
        }

        function getDeviceInfo() {
            const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
            
            return {
                screen: {
                    width: screen.width,
                    height: screen.height,
                    availWidth: screen.availWidth,
                    availHeight: screen.availHeight,
                    pixelRatio: window.devicePixelRatio || 1,
                },
                viewport: {
                    width: window.innerWidth,
                    height: window.innerHeight,
                },
                network: connection ? {
                    effectiveType: connection.effectiveType,
                    downlink: connection.downlink,
                    rtt: connection.rtt,
                    saveData: connection.saveData
                } : null,
                features: {
                    touchSupport: 'ontouchstart' in window,
                    maxTouchPoints: navigator.maxTouchPoints || 0,
                    vibration: 'vibrate' in navigator,
                    geolocation: 'geolocation' in navigator,
                    serviceWorker: 'serviceWorker' in navigator,
                    localStorage: (() => {
                        try { return 'localStorage' in window; } catch(e) { return false; }
                    })(),
                    deviceMemory: navigator.deviceMemory,
                    hardwareConcurrency: navigator.hardwareConcurrency
                }
            };
        }

        function renderBrowserInfo() {
            const browserInfo = detectBrowser();
            const deviceInfo = getDeviceInfo();
            
            const container = document.getElementById('browser-info');
            container.innerHTML = `
                <div class="info-item">
                    <div class="info-label">–ë—Ä–∞—É–∑–µ—Ä</div>
                    <div class="info-value">${browserInfo.browser} ${browserInfo.version}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞</div>
                    <div class="info-value">${browserInfo.platform}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">–≠–∫—Ä–∞–Ω</div>
                    <div class="info-value">${deviceInfo.screen.width}√ó${deviceInfo.screen.height}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Viewport</div>
                    <div class="info-value">${deviceInfo.viewport.width}√ó${deviceInfo.viewport.height}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Pixel Ratio</div>
                    <div class="info-value">${deviceInfo.screen.pixelRatio}x</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Touch Points</div>
                    <div class="info-value">${deviceInfo.features.maxTouchPoints}</div>
                </div>
            `;
            
            log(`–ë—Ä–∞—É–∑–µ—Ä: ${browserInfo.browser} ${browserInfo.version} –Ω–∞ ${browserInfo.platform}`, 'info');
        }

        function renderPerformanceInfo() {
            const deviceInfo = getDeviceInfo();
            
            const container = document.getElementById('performance-info');
            const networkInfo = deviceInfo.network;
            
            container.innerHTML = `
                <div class="info-item">
                    <div class="info-label">CPU —è–¥—Ä–∞</div>
                    <div class="info-value">${deviceInfo.features.hardwareConcurrency || 'N/A'}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">RAM</div>
                    <div class="info-value">${deviceInfo.features.deviceMemory || '?'} –ì–ë</div>
                </div>
                ${networkInfo ? `
                <div class="info-item">
                    <div class="info-label">–°–µ—Ç—å</div>
                    <div class="info-value">${networkInfo.effectiveType}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">–°–∫–æ—Ä–æ—Å—Ç—å</div>
                    <div class="info-value">${networkInfo.downlink} –ú–±–∏—Ç/—Å</div>
                </div>
                <div class="info-item">
                    <div class="info-label">RTT</div>
                    <div class="info-value">${networkInfo.rtt} –º—Å</div>
                </div>
                <div class="info-item">
                    <div class="info-label">–≠–∫–æ–Ω–æ–º–∏—è –¥–∞–Ω–Ω—ã—Ö</div>
                    <div class="info-value">${networkInfo.saveData ? '–í–∫–ª' : '–í—ã–∫–ª'}</div>
                </div>
                ` : ''}
            `;
        }

        function runAllTests() {
            log('–ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤...', 'info');
            
            const deviceInfo = getDeviceInfo();
            const results = [];
            
            // –¢–µ—Å—Ç 1: Touch support
            const touchSupport = deviceInfo.features.touchSupport;
            results.push({
                name: '–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Å–∞–Ω–∏–π',
                status: touchSupport ? 'pass' : 'fail',
                message: touchSupport ? `${deviceInfo.features.maxTouchPoints} —Ç–æ—á–µ–∫` : '–ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è'
            });
            
            // –¢–µ—Å—Ç 2: Local Storage
            results.push({
                name: 'Local Storage',
                status: deviceInfo.features.localStorage ? 'pass' : 'fail',
                message: deviceInfo.features.localStorage ? '–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è' : '–ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω'
            });
            
            // –¢–µ—Å—Ç 3: Service Worker
            results.push({
                name: 'Service Worker',
                status: deviceInfo.features.serviceWorker ? 'pass' : 'warn',
                message: deviceInfo.features.serviceWorker ? '–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è' : 'PWA –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω'
            });
            
            // –¢–µ—Å—Ç 4: Viewport
            const viewportOk = window.innerWidth > 0 && window.innerHeight > 0;
            results.push({
                name: 'Viewport',
                status: viewportOk ? 'pass' : 'fail',
                message: viewportOk ? '–ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π' : '–ü—Ä–æ–±–ª–µ–º—ã —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏'
            });
            
            // –¢–µ—Å—Ç 5: CSS Support
            const cssSupport = CSS && CSS.supports('height', '100vh');
            results.push({
                name: 'CSS Viewport Units',
                status: cssSupport ? 'pass' : 'warn',
                message: cssSupport ? '–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è' : '–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞'
            });
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            const container = document.getElementById('test-results');
            container.innerHTML = results.map(result => `
                <div class="test-item status-${result.status}">
                    <h4>${result.name}</h4>
                    <p>${result.message}</p>
                </div>
            `).join('');
            
            results.forEach(result => {
                log(`${result.name}: ${result.message}`, result.status === 'fail' ? 'error' : result.status === 'warn' ? 'warning' : 'success');
            });
            
            log('–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã', 'success');
        }

        function testVibration() {
            if (navigator.vibrate) {
                navigator.vibrate([100, 50, 100]);
                log('–¢–µ—Å—Ç –≤–∏–±—Ä–∞—Ü–∏–∏: –≤—ã–ø–æ–ª–Ω–µ–Ω', 'success');
                alert('–í–∏–±—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç!');
            } else {
                log('–¢–µ—Å—Ç –≤–∏–±—Ä–∞—Ü–∏–∏: –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è', 'warning');
                alert('–í–∏–±—Ä–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è');
            }
        }

        function testTouch() {
            log('–¢–µ—Å—Ç –∫–∞—Å–∞–Ω–∏–π: –æ–∂–∏–¥–∞–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è...', 'info');
            alert('–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∂–µ—Å—Ç—ã: —Å–≤–∞–π–ø, –ø–∏–Ω—á, –¥–æ–ª–≥–æ–µ –Ω–∞–∂–∞—Ç–∏–µ');
        }

        function testOrientation() {
            if (screen.orientation) {
                log(`–¢–µ–∫—É—â–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è: ${screen.orientation.angle}¬∞ (${screen.orientation.type})`, 'info');
                alert(`–û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è: ${screen.orientation.type}`);
            } else {
                log('–û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è', 'warning');
                alert('–ü–æ–≤–µ—Ä–Ω–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è');
            }
        }

        function testViewport() {
            const vh = window.innerHeight;
            const vw = window.innerWidth;
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
            document.documentElement.style.setProperty('--vh', `${vh * 0.01}px`);
            
            log(`Viewport: ${vw}√ó${vh}px`, 'info');
            log('CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ --vh —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã', 'success');
            alert(`Viewport: ${vw}√ó${vh}px`);
        }

        function openApp() {
            const url = window.location.origin;
            log(`–û—Ç–∫—Ä—ã–≤–∞–µ–º TradeFrame: ${url}`, 'info');
            window.open(url, '_blank');
        }

        // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
        let touchStartTime = 0;
        
        document.addEventListener('touchstart', (e) => {
            touchStartTime = Date.now();
            log(`Touch start: ${e.touches.length} —Ç–æ—á–µ–∫`, 'info');
        });
        
        document.addEventListener('touchend', (e) => {
            const duration = Date.now() - touchStartTime;
            log(`Touch end: –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ${duration}–º—Å`, 'info');
        });
        
        window.addEventListener('orientationchange', () => {
            setTimeout(() => {
                log(`–û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∞: ${window.innerWidth}√ó${window.innerHeight}`, 'info');
                renderBrowserInfo();
                renderPerformanceInfo();
            }, 100);
        });
        
        window.addEventListener('resize', () => {
            log(`–†–∞–∑–º–µ—Ä –æ–∫–Ω–∞: ${window.innerWidth}√ó${window.innerHeight}`, 'info');
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            renderBrowserInfo();
            renderPerformanceInfo();
            log('–¢–µ—Å—Ç–µ—Ä –º–æ–±–∏–ª—å–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω', 'success');
        });
    </script>
</body>
</html>