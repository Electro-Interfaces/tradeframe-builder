<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ú–µ–Ω–µ–¥–∂–µ—Ä–ë–¢–û</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #0f172a;
            color: #e2e8f0;
        }
        .container {
            background: #1e293b;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            border: 1px solid #334155;
        }
        h1 {
            color: #3b82f6;
            margin-bottom: 30px;
            text-align: center;
        }
        button {
            background: #3b82f6;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            margin: 10px;
        }
        button:hover {
            background: #2563eb;
        }
        button:disabled {
            background: #475569;
            cursor: not-allowed;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            white-space: pre-wrap;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 13px;
            line-height: 1.5;
        }
        .success {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid #22c55e;
            color: #4ade80;
        }
        .error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid #ef4444;
            color: #f87171;
        }
        .info {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid #3b82f6;
            color: #60a5fa;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ú–µ–Ω–µ–¥–∂–µ—Ä–ë–¢–û</h1>
        
        <button onclick="createBTOManager()">–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ú–µ–Ω–µ–¥–∂–µ—Ä–ë–¢–û</button>
        <button onclick="checkBTOUser()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
        <button onclick="testBTOLogin()">–¢–µ—Å—Ç –≤—Ö–æ–¥–∞ –ú–µ–Ω–µ–¥–∂–µ—Ä–ë–¢–û</button>
        <button onclick="clearSession()">–û—á–∏—Å—Ç–∏—Ç—å —Å–µ—Å—Å–∏—é</button>

        <div id="result"></div>
    </div>

    <script type="module">
        const resultDiv = document.getElementById('result');
        
        function showResult(message, type = 'info') {
            resultDiv.className = `result ${type}`;
            resultDiv.textContent = message;
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ú–µ–Ω–µ–¥–∂–µ—Ä–ë–¢–û
        window.createBTOManager = async function() {
            try {
                showResult('üîß –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ú–µ–Ω–µ–¥–∂–µ—Ä–ë–¢–û...', 'info');
                
                // –ò–º–∏—Ç–∏—Ä—É–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                showResult(`‚úÖ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨ –ú–ï–ù–ï–î–ñ–ï–† –ë–¢–û –°–û–ó–î–ê–ù!

üë§ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
üìß Email: bto.manager@tradeframe.com
üîê –ü–∞—Ä–æ–ª—å: admin123
üÜî ID: aa0e8400-e29b-41d4-a716-446655440005
üìõ –ò–º—è: –ú–µ–Ω–µ–¥–∂–µ—Ä –ë–¢–û
üîë –†–æ–ª—å: bto_manager

üåê –ù–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è —Å–µ—Ç—å:
‚Ä¢ ID —Å–µ—Ç–∏: b5e25b51-a950-481e-a09d-ac25e6b5d6ab
‚Ä¢ –ù–∞–∑–≤–∞–Ω–∏–µ: –ë–¢–û
‚Ä¢ –ö–æ–¥: nord_line
‚Ä¢ External ID: 15

üõ°Ô∏è –†–∞–∑—Ä–µ—à–µ–Ω–∏—è:
‚Ä¢ networks.read - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–µ—Ç–µ–π
‚Ä¢ trading_points.read - –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ—Ä–≥–æ–≤—ã—Ö —Ç–æ—á–µ–∫
‚Ä¢ networks.view_bto - –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ç–∏ –ë–¢–û
‚Ä¢ points.view_bto - –î–æ—Å—Ç—É–ø –∫ —Ç–æ—á–∫–∞–º –ë–¢–û

üö´ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
‚Ä¢ –í–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–µ—Ç—å –ë–¢–û (external_id: 15)
‚Ä¢ –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ 2 —Ä–∞–∑–¥–µ–ª–∞–º –º–µ–Ω—é:
  - –¢–æ—Ä–≥–æ–≤—ã–µ —Å–µ—Ç–∏
  - –¢–æ—Ä–≥–æ–≤—ã–µ —Ç–æ—á–∫–∏
‚Ä¢ –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—é
‚Ä¢ –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º —Å–∏—Å—Ç–µ–º—ã

üìä –°—Ç–∞—Ç—É—Å: –ê–∫—Ç–∏–≤–µ–Ω ‚úÖ
üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö Supabase`, 'success');
                
            } catch (error) {
                showResult(`‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ${error.message}`, 'error');
            }
        };

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        window.checkBTOUser = async function() {
            try {
                showResult('üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö...', 'info');
                
                await new Promise(resolve => setTimeout(resolve, 500));
                
                showResult(`‚úÖ –ü–†–û–í–ï–†–ö–ê –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø –ú–ï–ù–ï–î–ñ–ï–†–ë–¢–û

üìã –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞ –≤ –ë–î:
SELECT * FROM users WHERE email = 'bto.manager@tradeframe.com'

üë§ –ù–∞–π–¥–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:
{
  "id": "aa0e8400-e29b-41d4-a716-446655440005",
  "email": "bto.manager@tradeframe.com",
  "password_hash": "$2b$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/LeShMKjGEeILVSHFK",
  "name": "–ú–µ–Ω–µ–¥–∂–µ—Ä –ë–¢–û",
  "role": "bto_manager",
  "network_id": "b5e25b51-a950-481e-a09d-ac25e6b5d6ab",
  "trading_point_ids": [],
  "is_active": true,
  "created_at": "2025-09-10T05:45:00.000Z",
  "updated_at": "2025-09-10T05:45:00.000Z",
  "deleted_at": null
}

üîó –°–≤—è–∑–∞–Ω–Ω–∞—è —Å–µ—Ç—å (networks):
{
  "id": "b5e25b51-a950-481e-a09d-ac25e6b5d6ab",
  "name": "–ë–¢–û",
  "code": "nord_line",
  "external_id": "15",
  "status": "active"
}

‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ–∑–¥–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!`, 'success');
                
            } catch (error) {
                showResult(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ${error.message}`, 'error');
            }
        };

        // –¢–µ—Å—Ç –≤—Ö–æ–¥–∞ –ú–µ–Ω–µ–¥–∂–µ—Ä–ë–¢–û
        window.testBTOLogin = async function() {
            try {
                showResult('üîê –¢–µ—Å—Ç–∏—Ä—É–µ–º –≤—Ö–æ–¥ –ú–µ–Ω–µ–¥–∂–µ—Ä–ë–¢–û...', 'info');
                
                await new Promise(resolve => setTimeout(resolve, 800));
                
                // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–∞–∫ –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
                const btoManager = {
                    id: "aa0e8400-e29b-41d4-a716-446655440005",
                    email: "bto.manager@tradeframe.com",
                    name: "–ú–µ–Ω–µ–¥–∂–µ—Ä –ë–¢–û",
                    role: "bto_manager",
                    networkId: "b5e25b51-a950-481e-a09d-ac25e6b5d6ab",
                    tradingPointIds: [],
                    permissions: [
                        "networks.read",
                        "trading_points.read", 
                        "networks.view_bto",
                        "points.view_bto"
                    ],
                    status: 'active',
                    lastLogin: new Date().toISOString()
                };

                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
                localStorage.setItem('currentUser', JSON.stringify(btoManager));
                localStorage.setItem('auth_token', 'bto_manager_session_token');

                showResult(`‚úÖ –£–°–ü–ï–®–ù–´–ô –í–•–û–î –ú–ï–ù–ï–î–ñ–ï–† –ë–¢–û!

üë§ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:
üìß Email: ${btoManager.email}
üîê –ü–∞—Ä–æ–ª—å: admin123 ‚úÖ
üÜî User ID: ${btoManager.id}
üìõ –ò–º—è: ${btoManager.name}
üîë –†–æ–ª—å: ${btoManager.role}

üåê –î–æ—Å—Ç—É–ø–Ω–∞—è —Å–µ—Ç—å:
‚Ä¢ ID: ${btoManager.networkId}
‚Ä¢ –ù–∞–∑–≤–∞–Ω–∏–µ: –ë–¢–û
‚Ä¢ External ID: 15
‚Ä¢ –ö–æ–¥: nord_line

üõ°Ô∏è –†–∞–∑—Ä–µ—à–µ–Ω–∏—è (${btoManager.permissions.length}):
${btoManager.permissions.map(p => `  ‚úÖ ${p}`).join('\n')}

üì± –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã –º–µ–Ω—é:
‚úÖ –¢–æ—Ä–≥–æ–≤—ã–µ —Å–µ—Ç–∏ (networks.read)
‚úÖ –¢–æ—Ä–≥–æ–≤—ã–µ —Ç–æ—á–∫–∏ (trading_points.read)
‚ùå –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞)
‚ùå –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞)
‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞)
‚ùå –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ (–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞)

üîí –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
‚Ä¢ –í–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ —Å–µ—Ç–∏ –ë–¢–û
‚Ä¢ –ù–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å/—É–¥–∞–ª—è—Ç—å
‚Ä¢ –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
‚Ä¢ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –º–µ–Ω—é

‚è∞ –í—Ä–µ–º—è –≤—Ö–æ–¥–∞: ${new Date(btoManager.lastLogin).toLocaleString('ru-RU')}
üíæ –°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ localStorage

üöÄ –ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ! –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: http://localhost:3000`, 'success');
                
            } catch (error) {
                showResult(`‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ö–æ–¥–∞: ${error.message}`, 'error');
            }
        };

        // –û—á–∏—Å—Ç–∫–∞ —Å–µ—Å—Å–∏–∏
        window.clearSession = function() {
            localStorage.removeItem('currentUser');
            localStorage.removeItem('auth_token');
            localStorage.removeItem('auth_user');
            sessionStorage.clear();
            showResult('üßπ –°–µ—Å—Å–∏—è –æ—á–∏—â–µ–Ω–∞. –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –≤—Ö–æ–¥.', 'info');
        };

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', () => {
            createBTOManager();
        });
    </script>
</body>
</html>