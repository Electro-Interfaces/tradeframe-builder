<!DOCTYPE html>
<html>
<head>
    <title>Reset Legal Consents - Test Utility</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background-color: #1e293b;
            color: white;
        }
        button {
            background-color: #dc2626;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
        }
        button:hover {
            background-color: #b91c1c;
        }
        .success {
            background-color: #059669;
        }
        .success:hover {
            background-color: #047857;
        }
        .info {
            background-color: #1f2937;
            padding: 15px;
            border-radius: 6px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>üîß Test Legal Consent System</h1>
    
    <div class="info">
        <p><strong>–¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</strong> current_user</p>
        <p><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</strong> –°–±—Ä–æ—Å —Å–æ–≥–ª–∞—Å–∏–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä—É—é—â–µ–≥–æ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞</p>
    </div>

    <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–∏—è–º–∏:</h3>
    
    <button onclick="resetUserConsents()">
        üö´ –°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ —Å–æ–≥–ª–∞—Å–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    </button>
    
    <button onclick="clearAllLegalData()">
        üí• –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –ø—Ä–∞–≤–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
    </button>
    
    <button onclick="showCurrentStatus()" class="success">
        üìä –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
    </button>
    
    <button onclick="openApp()" class="success">
        üöÄ –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    </button>

    <div id="status"></div>

    <script>
        function resetUserConsents() {
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ç—É—Å —Å–æ–≥–ª–∞—Å–∏–π —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const statuses = JSON.parse(localStorage.getItem('legal_user_statuses') || '[]');
            const updatedStatuses = statuses.filter(s => s.user_id !== 'current_user');
            localStorage.setItem('legal_user_statuses', JSON.stringify(updatedStatuses));
            
            // –£–¥–∞–ª—è–µ–º —Å–æ–≥–ª–∞—Å–∏—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const acceptances = JSON.parse(localStorage.getItem('legal_user_acceptances') || '[]');
            const updatedAcceptances = acceptances.filter(a => a.user_id !== 'current_user');
            localStorage.setItem('legal_user_acceptances', JSON.stringify(updatedAcceptances));
            
            document.getElementById('status').innerHTML = '<div class="info">‚úÖ –°–æ–≥–ª–∞—Å–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è current_user —Å–±—Ä–æ—à–µ–Ω—ã! –¢–µ–ø–µ—Ä—å –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –±–ª–æ–∫–∏—Ä—É—é—â–µ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ.</div>';
        }
        
        function clearAllLegalData() {
            const keys = [
                'legal_document_types',
                'legal_document_versions', 
                'legal_user_acceptances',
                'legal_user_statuses',
                'legal_audit_log'
            ];
            
            keys.forEach(key => localStorage.removeItem(key));
            
            document.getElementById('status').innerHTML = '<div class="info">üí• –í—Å–µ –ø—Ä–∞–≤–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã! –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—Å—è —Å –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.</div>';
        }
        
        function showCurrentStatus() {
            const statuses = JSON.parse(localStorage.getItem('legal_user_statuses') || '[]');
            const acceptances = JSON.parse(localStorage.getItem('legal_user_acceptances') || '[]');
            
            const userStatus = statuses.find(s => s.user_id === 'current_user');
            const userAcceptances = acceptances.filter(a => a.user_id === 'current_user');
            
            let html = '<div class="info"><h4>üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:</h4>';
            
            if (userStatus) {
                html += '<p>‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç —Å–æ–≥–ª–∞—Å–∏—è</p>';
                html += '<p>üìã –°–æ–≥–ª–∞—Å–∏–π –≤ –±–∞–∑–µ: ' + userAcceptances.length + '</p>';
            } else {
                html += '<p>‚ùå –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç —Å–æ–≥–ª–∞—Å–∏–π</p>';
                html += '<p>üö® –ü—Ä–∏ –≤—Ö–æ–¥–µ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ</p>';
            }
            
            html += '</div>';
            document.getElementById('status').innerHTML = html;
        }
        
        function openApp() {
            window.open('http://localhost:3000/', '_blank');
        }
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        showCurrentStatus();
    </script>
</body>
</html>