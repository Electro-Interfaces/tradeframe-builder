<!DOCTYPE html>
<html>
<head>
    <title>Check LocalStorage</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1e293b; color: #fff; }
        pre { background: #374151; padding: 10px; border-radius: 4px; overflow-x: auto; }
        .success { color: #10b981; }
        .warn { color: #f59e0b; }
    </style>
</head>
<body>
    <h1>üîç Check LocalStorage API Config</h1>
    <div id="results"></div>

    <script>
        const resultsDiv = document.getElementById('results');
        
        function log(message, type = 'info') {
            const className = type === 'success' ? 'success' : type === 'warn' ? 'warn' : '';
            resultsDiv.innerHTML += `<div class="${className}">${message}</div>`;
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º API –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ localStorage
        const apiConfig = localStorage.getItem('api_config');
        
        if (apiConfig) {
            try {
                const config = JSON.parse(apiConfig);
                log('‚úÖ –ù–∞–π–¥–µ–Ω–∞ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–∞—è API –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:', 'success');
                log('<pre>' + JSON.stringify(config, null, 2) + '</pre>');
                
                const currentConn = config.availableConnections?.find(c => c.id === config.currentConnectionId);
                if (currentConn) {
                    log(`üîç –¢–µ–∫—É—â–µ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: ${currentConn.name} (${currentConn.type})`);
                    log(`üîç URL: ${currentConn.url}`);
                    
                    if (currentConn.type === 'mock') {
                        log('‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –í localStorage –Ω–∞—Å—Ç—Ä–æ–µ–Ω MOCK —Ä–µ–∂–∏–º!', 'warn');
                        log('–≠—Ç–æ –æ–±—ä—è—Å–Ω—è–µ—Ç –ø–æ—á–µ–º—É –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ API');
                    } else {
                        log('‚úÖ –í localStorage –Ω–∞—Å—Ç—Ä–æ–µ–Ω API —Ä–µ–∂–∏–º', 'success');
                    }
                }
            } catch (e) {
                log('‚ùå –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ API –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: ' + e.message);
            }
        } else {
            log('‚ö†Ô∏è API –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ localStorage –ù–ï –ù–ê–ô–î–ï–ù–ê', 'warn');
            log('–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑ –∫–æ–¥–∞');
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥—Ä—É–≥–∏–µ –∫–ª—é—á–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
        log('\nüîç –î—Ä—É–≥–∏–µ –∫–ª—é—á–∏ –≤ localStorage:');
        for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            if (key && (key.includes('operation') || key.includes('tradeframe') || key.includes('api'))) {
                const value = localStorage.getItem(key);
                log(`   - ${key}: ${value ? (value.length > 100 ? value.substring(0, 100) + '...' : value) : 'null'}`);
            }
        }
    </script>
</body>
</html>