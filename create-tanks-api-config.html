<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ API —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–æ–≤</title>
</head>
<body>
    <h1>–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ API —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–æ–≤</h1>
    <div id="results"></div>

    <script type="module">
        import { tradingNetworkConfigService } from './src/services/tradingNetworkConfigService.js';

        const results = document.getElementById('results');

        async function createConfiguration() {
            console.log('üèóÔ∏è –°–æ–∑–¥–∞–µ–º –±–∞–∑–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é API –¥–ª—è —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–æ–≤...');
            results.innerHTML += '<h2>–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏</h2>';

            try {
                // –°–æ–∑–¥–∞–µ–º –±–∞–∑–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                const config = {
                    enabled: true,
                    baseUrl: 'https://api.example.com', // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π URL
                    apiKey: 'your-api-key', // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –∫–ª—é—á
                    timeout: 30000,
                    maxRetries: 3,
                    endpoints: {
                        tanks: '/api/tanks', // –≠–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–æ–≤
                        operations: '/api/operations',
                        prices: '/api/prices'
                    },
                    authentication: {
                        type: 'api-key',
                        keyHeader: 'X-API-Key'
                    },
                    networkId: 'main-network'
                };

                console.log('üìã –°–æ–∑–¥–∞–≤–∞–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:', config);
                results.innerHTML += `<div><strong>–°–æ–∑–¥–∞–≤–∞–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:</strong></div>`;
                results.innerHTML += `<pre>${JSON.stringify(config, null, 2)}</pre>`;

                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
                await tradingNetworkConfigService.saveConfig(config);
                console.log('‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!');
                results.innerHTML += `<div style="color: green;">‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!</div>`;

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–∏–ª–∞—Å—å
                const savedConfig = await tradingNetworkConfigService.getConfig();
                console.log('üîç –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:', savedConfig);
                results.innerHTML += `<div><strong>–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:</strong></div>`;
                results.innerHTML += `<pre>${JSON.stringify(savedConfig, null, 2)}</pre>`;

                results.innerHTML += `<div style="color: blue; margin-top: 20px;">
                    ‚ÑπÔ∏è <strong>–í–∞–∂–Ω–æ:</strong> –ó–∞–º–µ–Ω–∏—Ç–µ URL –∏ API –∫–ª—é—á –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Ä–∞–∑–¥–µ–ª–µ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏"
                </div>`;

            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:', error);
                results.innerHTML += `<div style="color: red;">‚ùå –û—à–∏–±–∫–∞: ${error.message}</div>`;
            }
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        createConfiguration();
    </script>
</body>
</html>