<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #0f172a;
            color: #e2e8f0;
        }
        .container {
            background: #1e293b;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            border: 1px solid #334155;
        }
        h1 {
            color: #3b82f6;
            margin-bottom: 30px;
            text-align: center;
        }
        .user-card {
            background: #334155;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            border-left: 4px solid #3b82f6;
        }
        .user-card h3 {
            color: #60a5fa;
            margin-top: 0;
        }
        button {
            background: #3b82f6;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            margin: 10px;
        }
        button:hover {
            background: #2563eb;
        }
        button:disabled {
            background: #64748b;
            cursor: not-allowed;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            white-space: pre-wrap;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 13px;
            max-height: 400px;
            overflow-y: auto;
        }
        .success {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid #22c55e;
            color: #4ade80;
        }
        .error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid #ef4444;
            color: #f87171;
        }
        .info {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid #3b82f6;
            color: #60a5fa;
        }
        .warning {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid #f59e0b;
            color: #fbbf24;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üë• –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö Supabase</h1>
        
        <div class="user-card">
            <h3>üë®‚Äçüíº –°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</h3>
            <p><strong>Email:</strong> admin@tradeframe.com</p>
            <p><strong>–ü–∞—Ä–æ–ª—å:</strong> admin123</p>
            <p><strong>–†–æ–ª—å:</strong> system_admin</p>
            <p><strong>–ü—Ä–∞–≤–∞:</strong> –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º</p>
            <button onclick="createSystemAdmin()">–°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</button>
        </div>

        <div class="user-card">
            <h3>üè¢ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–µ—Ç–∏</h3>
            <p><strong>Email:</strong> network.admin@demo-azs.ru</p>
            <p><strong>–ü–∞—Ä–æ–ª—å:</strong> admin123</p>
            <p><strong>–†–æ–ª—å:</strong> network_admin</p>
            <p><strong>–ü—Ä–∞–≤–∞:</strong> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–µ—Ç—å—é</p>
            <button onclick="createNetworkAdmin()">–°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å–µ—Ç–∏</button>
        </div>

        <div class="user-card">
            <h3>üìä –ú–µ–Ω–µ–¥–∂–µ—Ä</h3>
            <p><strong>Email:</strong> manager@demo-azs.ru</p>
            <p><strong>–ü–∞—Ä–æ–ª—å:</strong> admin123</p>
            <p><strong>–†–æ–ª—å:</strong> manager</p>
            <p><strong>–ü—Ä–∞–≤–∞:</strong> –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã</p>
            <button onclick="createManager()">–°–æ–∑–¥–∞—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞</button>
        </div>

        <div class="user-card">
            <h3>‚õΩ –û–ø–µ—Ä–∞—Ç–æ—Ä</h3>
            <p><strong>Email:</strong> operator@demo-azs.ru</p>
            <p><strong>–ü–∞—Ä–æ–ª—å:</strong> admin123</p>
            <p><strong>–†–æ–ª—å:</strong> operator</p>
            <p><strong>–ü—Ä–∞–≤–∞:</strong> –†–∞–±–æ—Ç–∞ –Ω–∞ –ê–ó–°</p>
            <button onclick="createOperator()">–°–æ–∑–¥–∞—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞</button>
        </div>

        <div class="user-card">
            <h3>üéØ –ú–µ–Ω–µ–¥–∂–µ—Ä –ë–¢–û</h3>
            <p><strong>Email:</strong> bto.manager@tradeframe.com</p>
            <p><strong>–ü–∞—Ä–æ–ª—å:</strong> admin123</p>
            <p><strong>–†–æ–ª—å:</strong> bto_manager</p>
            <p><strong>–ü—Ä–∞–≤–∞:</strong> –¢–æ–ª—å–∫–æ —Å–µ—Ç—å –ë–¢–û</p>
            <button onclick="createBTOManager()">–°–æ–∑–¥–∞—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ë–¢–û</button>
        </div>

        <button onclick="createAllUsers()" style="background: #059669; font-size: 16px; padding: 15px 30px;">üöÄ –°–æ–∑–¥–∞—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</button>
        <button onclick="checkAllUsers()">üë• –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</button>

        <div id="result"></div>
    </div>

    <script>
        const resultDiv = document.getElementById('result');
        
        function showResult(message, type = 'info') {
            resultDiv.className = `result ${type}`;
            resultDiv.textContent = message;
        }

        const supabaseUrl = 'https://tohtryzyffcebtyvkxwh.supabase.co';
        const serviceRoleKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRvaHRyeXp5ZmZjZWJ0eXZreHdoIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1Njg3NTQ0OCwiZXhwIjoyMDcyNDUxNDQ4fQ.kN6uF9YhJzbzu2ugHRQCyzuNOwawsTDtwelGO0uCjyY';

        async function createUser(userData) {
            try {
                const response = await fetch(`${supabaseUrl}/rest/v1/users`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${serviceRoleKey}`,
                        'apikey': serviceRoleKey,
                        'Prefer': 'return=representation'
                    },
                    body: JSON.stringify(userData)
                });

                if (response.ok) {
                    return await response.json();
                } else if (response.status === 409) {
                    // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø–æ–ø—Ä–æ–±—É–µ–º –æ–±–Ω–æ–≤–∏—Ç—å
                    const updateResponse = await fetch(`${supabaseUrl}/rest/v1/users?email=eq.${userData.email}`, {
                        method: 'PATCH',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${serviceRoleKey}`,
                            'apikey': serviceRoleKey,
                            'Prefer': 'return=representation'
                        },
                        body: JSON.stringify({
                            name: userData.name,
                            role: userData.role,
                            network_id: userData.network_id,
                            is_active: true
                        })
                    });
                    
                    if (updateResponse.ok) {
                        return await updateResponse.json();
                    } else {
                        throw new Error(`–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: ${await updateResponse.text()}`);
                    }
                } else {
                    throw new Error(`HTTP ${response.status}: ${await response.text()}`);
                }
            } catch (error) {
                throw error;
            }
        }

        window.createSystemAdmin = async function() {
            try {
                showResult('üë®‚Äçüíº –°–æ–∑–¥–∞–µ–º —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞...', 'info');

                const userData = {
                    id: '550e8400-e29b-41d4-a716-446655440000',
                    email: 'admin@tradeframe.com',
                    password_hash: '$2b$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/LeShMKjGEeILVSHFK', // admin123
                    name: '–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä',
                    role: 'system_admin',
                    network_id: null, // –°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Å–µ—Ç—è–º
                    trading_point_ids: [],
                    is_active: true,
                    phone: null,
                    position: 'System Administrator',
                    telegram_notifications_enabled: true
                };

                const result = await createUser(userData);
                
                showResult(`‚úÖ –°–ò–°–¢–ï–ú–ù–´–ô –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–† –°–û–ó–î–ê–ù!

üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:
${JSON.stringify(result, null, 2)}

üîê –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞:
‚Ä¢ Email: admin@tradeframe.com
‚Ä¢ –ü–∞—Ä–æ–ª—å: admin123
‚Ä¢ –†–æ–ª—å: system_admin
‚Ä¢ –ü—Ä–∞–≤–∞: –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º —Å–∏—Å—Ç–µ–º—ã`, 'success');

            } catch (error) {
                showResult(`‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞: ${error.message}`, 'error');
            }
        };

        window.createNetworkAdmin = async function() {
            try {
                showResult('üè¢ –°–æ–∑–¥–∞–µ–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å–µ—Ç–∏...', 'info');

                // –°–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∞–µ–º ID –¥–µ–º–æ-—Å–µ—Ç–∏
                const networksResponse = await fetch(`${supabaseUrl}/rest/v1/networks?external_id=eq.1`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${serviceRoleKey}`,
                        'apikey': serviceRoleKey
                    }
                });

                const networks = await networksResponse.json();
                let networkId = null;
                
                if (networks.length > 0) {
                    networkId = networks[0].id;
                }

                const userData = {
                    id: '550e8400-e29b-41d4-a716-446655440001',
                    email: 'network.admin@demo-azs.ru',
                    password_hash: '$2b$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/LeShMKjGEeILVSHFK', // admin123
                    name: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–µ—Ç–∏ –î–ï–ú–û-–ê–ó–°',
                    role: 'network_admin',
                    network_id: networkId,
                    trading_point_ids: [],
                    is_active: true,
                    phone: null,
                    position: 'Network Administrator',
                    telegram_notifications_enabled: true
                };

                const result = await createUser(userData);
                
                showResult(`‚úÖ –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–† –°–ï–¢–ò –°–û–ó–î–ê–ù!

üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:
${JSON.stringify(result, null, 2)}

üîê –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞:
‚Ä¢ Email: network.admin@demo-azs.ru
‚Ä¢ –ü–∞—Ä–æ–ª—å: admin123
‚Ä¢ –†–æ–ª—å: network_admin
‚Ä¢ –°–µ—Ç—å: ${networkId ? '–î–ï–ú–û-–ê–ó–°' : '–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞'}`, 'success');

            } catch (error) {
                showResult(`‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å–µ—Ç–∏: ${error.message}`, 'error');
            }
        };

        window.createManager = async function() {
            try {
                showResult('üìä –°–æ–∑–¥–∞–µ–º –º–µ–Ω–µ–¥–∂–µ—Ä–∞...', 'info');

                // –ü–æ–ª—É—á–∞–µ–º ID –¥–µ–º–æ-—Å–µ—Ç–∏
                const networksResponse = await fetch(`${supabaseUrl}/rest/v1/networks?external_id=eq.1`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${serviceRoleKey}`,
                        'apikey': serviceRoleKey
                    }
                });

                const networks = await networksResponse.json();
                let networkId = null;
                
                if (networks.length > 0) {
                    networkId = networks[0].id;
                }

                const userData = {
                    id: '550e8400-e29b-41d4-a716-446655440002',
                    email: 'manager@demo-azs.ru',
                    password_hash: '$2b$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/LeShMKjGEeILVSHFK', // admin123
                    name: '–ú–µ–Ω–µ–¥–∂–µ—Ä –î–ï–ú–û-–ê–ó–°',
                    role: 'manager',
                    network_id: networkId,
                    trading_point_ids: [],
                    is_active: true,
                    phone: null,
                    position: 'Manager',
                    telegram_notifications_enabled: true
                };

                const result = await createUser(userData);
                
                showResult(`‚úÖ –ú–ï–ù–ï–î–ñ–ï–† –°–û–ó–î–ê–ù!

üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:
${JSON.stringify(result, null, 2)}

üîê –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞:
‚Ä¢ Email: manager@demo-azs.ru
‚Ä¢ –ü–∞—Ä–æ–ª—å: admin123
‚Ä¢ –†–æ–ª—å: manager
‚Ä¢ –°–µ—Ç—å: ${networkId ? '–î–ï–ú–û-–ê–ó–°' : '–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞'}`, 'success');

            } catch (error) {
                showResult(`‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞: ${error.message}`, 'error');
            }
        };

        window.createOperator = async function() {
            try {
                showResult('‚õΩ –°–æ–∑–¥–∞–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞...', 'info');

                // –ü–æ–ª—É—á–∞–µ–º ID –¥–µ–º–æ-—Å–µ—Ç–∏
                const networksResponse = await fetch(`${supabaseUrl}/rest/v1/networks?external_id=eq.1`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${serviceRoleKey}`,
                        'apikey': serviceRoleKey
                    }
                });

                const networks = await networksResponse.json();
                let networkId = null;
                
                if (networks.length > 0) {
                    networkId = networks[0].id;
                }

                const userData = {
                    id: '550e8400-e29b-41d4-a716-446655440003',
                    email: 'operator@demo-azs.ru',
                    password_hash: '$2b$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/LeShMKjGEeILVSHFK', // admin123
                    name: '–û–ø–µ—Ä–∞—Ç–æ—Ä –ê–ó–°',
                    role: 'operator',
                    network_id: networkId,
                    trading_point_ids: [],
                    is_active: true,
                    phone: null,
                    position: 'Operator',
                    telegram_notifications_enabled: true
                };

                const result = await createUser(userData);
                
                showResult(`‚úÖ –û–ü–ï–†–ê–¢–û–† –°–û–ó–î–ê–ù!

üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:
${JSON.stringify(result, null, 2)}

üîê –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞:
‚Ä¢ Email: operator@demo-azs.ru
‚Ä¢ –ü–∞—Ä–æ–ª—å: admin123
‚Ä¢ –†–æ–ª—å: operator
‚Ä¢ –°–µ—Ç—å: ${networkId ? '–î–ï–ú–û-–ê–ó–°' : '–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞'}`, 'success');

            } catch (error) {
                showResult(`‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞: ${error.message}`, 'error');
            }
        };

        window.createBTOManager = async function() {
            try {
                showResult('üéØ –°–æ–∑–¥–∞–µ–º –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ë–¢–û...', 'info');

                // –ü–æ–ª—É—á–∞–µ–º ID —Å–µ—Ç–∏ –ë–¢–û
                const networksResponse = await fetch(`${supabaseUrl}/rest/v1/networks?or=(external_id.eq.15,name.ilike.*–±—Ç–æ*)`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${serviceRoleKey}`,
                        'apikey': serviceRoleKey
                    }
                });

                const networks = await networksResponse.json();
                const btoNetwork = networks.find(n => n.external_id === "15" || n.name?.toLowerCase().includes('–±—Ç–æ'));
                
                if (!btoNetwork) {
                    throw new Error('–°–µ—Ç—å –ë–¢–û –Ω–µ –Ω–∞–π–¥–µ–Ω–∞! –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ç—å —Å external_id="15"');
                }

                const userData = {
                    id: 'aa0e8400-e29b-41d4-a716-446655440005',
                    email: 'bto.manager@tradeframe.com',
                    password_hash: '$2b$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/LeShMKjGEeILVSHFK', // admin123
                    name: '–ú–µ–Ω–µ–¥–∂–µ—Ä –ë–¢–û',
                    role: 'bto_manager',
                    network_id: btoNetwork.id,
                    trading_point_ids: [],
                    is_active: true,
                    phone: null,
                    position: 'BTO Manager',
                    telegram_notifications_enabled: true
                };

                const result = await createUser(userData);
                
                showResult(`‚úÖ –ú–ï–ù–ï–î–ñ–ï–† –ë–¢–û –°–û–ó–î–ê–ù!

üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:
${JSON.stringify(result, null, 2)}

üîê –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞:
‚Ä¢ Email: bto.manager@tradeframe.com
‚Ä¢ –ü–∞—Ä–æ–ª—å: admin123
‚Ä¢ –†–æ–ª—å: bto_manager
‚Ä¢ –°–µ—Ç—å: –ë–¢–û (${btoNetwork.id})
‚Ä¢ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: –¢–æ–ª—å–∫–æ —Å–µ—Ç—å –ë–¢–û –∏ —Ä–∞–∑–¥–µ–ª—ã "–¢–æ—Ä–≥–æ–≤—ã–µ —Å–µ—Ç–∏" –∏ "–¢–æ—Ä–≥–æ–≤—ã–µ —Ç–æ—á–∫–∏"`, 'success');

            } catch (error) {
                showResult(`‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ë–¢–û: ${error.message}`, 'error');
            }
        };

        window.createAllUsers = async function() {
            try {
                showResult('üöÄ –°–æ–∑–¥–∞–µ–º –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...', 'info');
                
                await createSystemAdmin();
                await new Promise(r => setTimeout(r, 500)); // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
                
                await createNetworkAdmin();
                await new Promise(r => setTimeout(r, 500));
                
                await createManager();
                await new Promise(r => setTimeout(r, 500));
                
                await createOperator();
                await new Promise(r => setTimeout(r, 500));
                
                await createBTOManager();
                
                showResult(`üéâ –í–°–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ò –°–û–ó–î–ê–ù–´ –£–°–ü–ï–®–ù–û!

üìã –°–ø–∏—Å–æ–∫ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

üë®‚Äçüíº –°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
‚Ä¢ Email: admin@tradeframe.com
‚Ä¢ –ü–∞—Ä–æ–ª—å: admin123
‚Ä¢ –†–æ–ª—å: system_admin

üè¢ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–µ—Ç–∏  
‚Ä¢ Email: network.admin@demo-azs.ru
‚Ä¢ –ü–∞—Ä–æ–ª—å: admin123
‚Ä¢ –†–æ–ª—å: network_admin

üìä –ú–µ–Ω–µ–¥–∂–µ—Ä
‚Ä¢ Email: manager@demo-azs.ru  
‚Ä¢ –ü–∞—Ä–æ–ª—å: admin123
‚Ä¢ –†–æ–ª—å: manager

‚õΩ –û–ø–µ—Ä–∞—Ç–æ—Ä
‚Ä¢ Email: operator@demo-azs.ru
‚Ä¢ –ü–∞—Ä–æ–ª—å: admin123
‚Ä¢ –†–æ–ª—å: operator

üéØ –ú–µ–Ω–µ–¥–∂–µ—Ä –ë–¢–û
‚Ä¢ Email: bto.manager@tradeframe.com
‚Ä¢ –ü–∞—Ä–æ–ª—å: admin123
‚Ä¢ –†–æ–ª—å: bto_manager

üîê –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É –∏—Å–ø–æ–ª—å–∑—É—è –ª—é–±–æ–π –∏–∑ —ç—Ç–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤!`, 'success');

            } catch (error) {
                showResult(`‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: ${error.message}`, 'error');
            }
        };

        window.checkAllUsers = async function() {
            try {
                showResult('üë• –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...', 'info');

                const response = await fetch(`${supabaseUrl}/rest/v1/users?select=*&is_active=eq.true&order=created_at`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${serviceRoleKey}`,
                        'apikey': serviceRoleKey
                    }
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const users = await response.json();
                
                showResult(`üìä –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ò –í –ë–ê–ó–ï –î–ê–ù–ù–´–•:

–í—Å–µ–≥–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: ${users.length}

${users.map((user, index) => `
${index + 1}. ${user.name}
   ‚Ä¢ Email: ${user.email}
   ‚Ä¢ –†–æ–ª—å: ${user.role}
   ‚Ä¢ –°—Ç–∞—Ç—É—Å: ${user.is_active ? '–ê–∫—Ç–∏–≤–µ–Ω ‚úÖ' : '–ù–µ–∞–∫—Ç–∏–≤–µ–Ω ‚ùå'}
   ‚Ä¢ –°–µ—Ç—å: ${user.network_id || '–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞'}
   ‚Ä¢ –°–æ–∑–¥–∞–Ω: ${new Date(user.created_at).toLocaleString('ru-RU')}
`).join('\n')}

üîê –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–∞—Ä–æ–ª—å: admin123`, 'success');

            } catch (error) {
                showResult(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: ${error.message}`, 'error');
            }
        };

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(checkAllUsers, 1000);
        });
    </script>
</body>
</html>