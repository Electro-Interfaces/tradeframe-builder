<!DOCTYPE html>
<html>
<head>
    <title>üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –°–ï–õ–ï–ö–¢–û–†–û–í - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: Arial, sans-serif; background: #1e293b; color: white; padding: 20px; line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; }
        .critical { background: #ff6b35; color: white; padding: 20px; border-radius: 8px; margin: 20px 0; font-weight: bold; }
        .section { background: #374151; padding: 20px; border-radius: 8px; margin: 15px 0; }
        .success { background: #10b981; color: white; padding: 15px; border-radius: 6px; margin: 10px 0; }
        .error { background: #dc2626; color: white; padding: 15px; border-radius: 6px; margin: 10px 0; }
        .warning { background: #f59e0b; color: black; padding: 15px; border-radius: 6px; margin: 10px 0; }
        .info { background: #3b82f6; color: white; padding: 15px; border-radius: 6px; margin: 10px 0; }
        .step { background: #4b5563; padding: 15px; border-left: 4px solid #3b82f6; margin: 10px 0; }
        .code { background: #0f172a; padding: 15px; border-radius: 8px; font-family: monospace; font-size: 12px; overflow-x: auto; margin: 10px 0; white-space: pre-wrap; }
        button { background: #3b82f6; color: white; padding: 12px 24px; border: none; border-radius: 6px; cursor: pointer; margin: 5px; }
        button:hover { background: #2563eb; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –°–ï–õ–ï–ö–¢–û–†–û–í - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</h1>
        
        <div class="critical">
            <h2>üö® –ü–†–û–ë–õ–ï–ú–ê –î–ò–ê–ì–ù–û–°–¢–ò–†–û–í–ê–ù–ê!</h2>
            <p>PointSelect –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –í–°–ï —Ç–æ—Ä–≥–æ–≤—ã–µ —Ç–æ—á–∫–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –≤—ã–±—Ä–∞–Ω–Ω—É—é —Å–µ—Ç—å!</p>
        </div>

        <div class="section">
            <h3>üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã:</h3>
            <div class="info">
                <h4>‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:</h4>
                <ul>
                    <li>‚úÖ <strong>tradingPointsService.getByNetworkId()</strong> - –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ network_id</li>
                    <li>‚úÖ <strong>MainLayout</strong> - –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ—Ä–≥–æ–≤—ã–µ —Ç–æ—á–∫–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏</li>
                    <li>‚úÖ <strong>Database</strong> - –≤ –±–∞–∑–µ –µ—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Å–µ—Ç—è–º–∏ –∏ —Ç–æ—Ä–≥–æ–≤—ã–º–∏ —Ç–æ—á–∫–∞–º–∏</li>
                </ul>
            </div>
            
            <div class="error">
                <h4>‚ùå –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:</h4>
                <ul>
                    <li>‚ùå <strong>PointSelect –≤ Header</strong> - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —Ç–æ—Ä–≥–æ–≤—ã–µ —Ç–æ—á–∫–∏ –≤–º–µ—Å—Ç–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Å–µ—Ç–∏</li>
                    <li>‚ùå <strong>NetworkId –ø–µ—Ä–µ–¥–∞—á–∞</strong> - –≤–æ–∑–º–æ–∂–Ω–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è networkId –≤ PointSelect</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h3>üìã –ü–æ—à–∞–≥–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:</h3>
            
            <div class="step">
                <h4>–®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ –≥–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</h4>
                <button onclick="openMainApp()">üåê –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</button>
                <p>–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ DevTools (F12) ‚Üí Console</p>
            </div>
            
            <div class="step">
                <h4>–®–∞–≥ 2: –í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ç—å 15 "–ù–æ—Ä–¥ –õ–∞–π–Ω"</h4>
                <p>–í –≤–µ—Ä—Ö–Ω–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä–µ –≤—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ç—å "–ù–æ—Ä–¥ –õ–∞–π–Ω" –∏ —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏</p>
                <div class="code">–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:
üè™ PointSelect: Loading trading points for network: b5e25b51-a950-481e-a09d-ac25e6b5d6ab
üéØ PointSelect: Using getByNetworkId with: b5e25b51-a950-481e-a09d-ac25e6b5d6ab
üîÑ Loading trading points for network: b5e25b51-a950-481e-a09d-ac25e6b5d6ab
‚úÖ Loaded 1 trading points for network b5e25b51-a950-481e-a09d-ac25e6b5d6ab
‚úÖ PointSelect: Loaded filtered points: 1</div>
            </div>
            
            <div class="step">
                <h4>–®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ–ª–µ–∫—Ç–æ—Ä —Ç–æ—Ä–≥–æ–≤—ã—Ö —Ç–æ—á–µ–∫</h4>
                <p>–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —Å–µ–ª–µ–∫—Ç–æ—Ä —Ç–æ—Ä–≥–æ–≤—ã—Ö —Ç–æ—á–µ–∫ (—Ä—è–¥–æ–º —Å —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–º —Å–µ—Ç–µ–π)</p>
                <div class="success">‚úÖ <strong>–ü–†–ê–í–ò–õ–¨–ù–û:</strong> –î–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ "–ê–ó–° 4" –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è —Å—Ç–∞–Ω—Ü–∏—è</div>
                <div class="error">‚ùå <strong>–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:</strong> –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤—Å–µ —Å—Ç–∞–Ω—Ü–∏–∏ (–ê–ó–° 1, –ê–ó–° 2, –ê–ó–° 3, –ê–ó–° 4, –ê–ó–° ‚Ññ001, –∏ —Ç.–¥.)</div>
            </div>
            
            <div class="step">
                <h4>–®–∞–≥ 4: –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤</h4>
                <p>–ï—Å–ª–∏ –≤ –ª–æ–≥–∞—Ö –≤—ã –≤–∏–¥–∏—Ç–µ:</p>
                <div class="code">‚ö†Ô∏è PointSelect: No networkId provided, loading ALL trading points
üìä PointSelect: Loaded ALL points: [–±–æ–ª—å—à–æ–µ —á–∏—Å–ª–æ]</div>
                <p>–ó–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ –≤ –ø–µ—Ä–µ–¥–∞—á–µ <code>networkId</code> –≤ PointSelect –∫–æ–º–ø–æ–Ω–µ–Ω—Ç!</p>
            </div>
        </div>

        <div class="section">
            <h3>üõ†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:</h3>
            
            <div class="warning">
                <h4>–†–µ—à–µ–Ω–∏–µ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–¥–∞—á—É networkId –≤ Header</h4>
                <p>–í —Ñ–∞–π–ª–µ <strong>src/components/layout/Header.tsx</strong> –Ω–∞ —Å—Ç—Ä–æ–∫–µ ~100:</p>
                <div class="code">networkId={selectedNetwork}</div>
                <p>–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ <code>selectedNetwork</code> —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π UUID —Å–µ—Ç–∏</p>
            </div>
            
            <div class="warning">
                <h4>–†–µ—à–µ–Ω–∏–µ 2: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å MainLayout</h4>
                <p>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ –∂–µ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ—Ä–≥–æ–≤—ã–µ —Ç–æ—á–∫–∏ –∏–∑ MainLayout, –∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—Ç—å –∑–∞–Ω–æ–≤–æ –≤ PointSelect</p>
            </div>
            
            <div class="warning">
                <h4>–†–µ—à–µ–Ω–∏–µ 3: –î–æ–±–∞–≤–∏—Ç—å fallback –ª–æ–≥–∏–∫—É</h4>
                <p>–ï—Å–ª–∏ networkId –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è, –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä —Ç–æ—Ä–≥–æ–≤—ã—Ö —Ç–æ—á–µ–∫</p>
            </div>
        </div>

        <div class="section">
            <h3>üß™ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã:</h3>
            <button onclick="testNetwork15Only()">üè™ –¢–µ—Å—Ç —Ç–æ—Ä–≥–æ–≤—ã—Ö —Ç–æ—á–µ–∫ —Å–µ—Ç–∏ 15</button>
            <button onclick="testAllNetworks()">üìä –¢–µ—Å—Ç –≤—Å–µ—Ö —Å–µ—Ç–µ–π</button>
            <button onclick="openDiagnosticPages()">üîç –û—Ç–∫—Ä—ã—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</button>
        </div>

        <div id="results"></div>
    </div>

    <script>
        // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
        const CORRECT_URL = 'https://dlvggjmirqhmdylfwngm.supabase.co';
        const CORRECT_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRsdmdnam1pcnFobWR5bGZ3bmdtIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTczNTY5Njg2NSwiZXhwIjoyMDUxMjcyODY1fQ.SLOvfECCNMeWX-V7Hl4mjfyDGfTLUmLF9GCn3R3NfAY';
        const NETWORK_15_UUID = 'b5e25b51-a950-481e-a09d-ac25e6b5d6ab';

        window.openMainApp = function() {
            addResult('üåê –û—Ç–∫—Ä—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏...', 'info');
            addResult('üìã –í–ê–ñ–ù–û: –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Console –∏ —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏!', 'warning');
            window.open('http://localhost:3000', '_blank');
        }

        window.testNetwork15Only = async function() {
            addResult('üè™ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç: —Ç–æ—Ä–≥–æ–≤—ã–µ —Ç–æ—á–∫–∏ —Ç–æ–ª—å–∫–æ —Å–µ—Ç–∏ 15...', 'info');

            try {
                const endpoint = `${CORRECT_URL}/rest/v1/trading_points?select=id,name,network_id&eq.network_id=${NETWORK_15_UUID}`;
                
                const response = await fetch(endpoint, {
                    headers: {
                        'apikey': CORRECT_KEY,
                        'Authorization': `Bearer ${CORRECT_KEY}`,
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                const count = data?.length || 0;

                if (count === 1) {
                    addResult(`‚úÖ –í —Å–µ—Ç–∏ 15 –Ω–∞–π–¥–µ–Ω–∞ ${count} —Ç–æ—Ä–≥–æ–≤–∞—è —Ç–æ—á–∫–∞ - —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!`, 'success');
                    addResult(`üìç ${data[0].name} (UUID: ${data[0].id})`, 'success');
                } else {
                    addResult(`‚ùå –í —Å–µ—Ç–∏ 15 –Ω–∞–π–¥–µ–Ω–æ ${count} —Ç–æ—Ä–≥–æ–≤—ã—Ö —Ç–æ—á–µ–∫ - —ç—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!`, 'error');
                }

            } catch (error) {
                addResult(`‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∞: ${error.message}`, 'error');
            }
        }

        window.testAllNetworks = async function() {
            addResult('üìä –¢–µ—Å—Ç: –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Ç–æ—á–µ–∫ –ø–æ —Å–µ—Ç—è–º...', 'info');

            try {
                const endpoint = `${CORRECT_URL}/rest/v1/trading_points?select=id,name,network_id&order=name`;
                
                const response = await fetch(endpoint, {
                    headers: {
                        'apikey': CORRECT_KEY,
                        'Authorization': `Bearer ${CORRECT_KEY}`,
                        'Content-Type': 'application/json'
                    }
                });

                const data = await response.json();
                
                // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ —Å–µ—Ç—è–º
                const byNetwork = {};
                data.forEach(point => {
                    const netId = point.network_id;
                    if (!byNetwork[netId]) {
                        byNetwork[netId] = [];
                    }
                    byNetwork[netId].push(point);
                });

                addResult(`üìä –í—Å–µ–≥–æ –Ω–∞–π–¥–µ–Ω–æ ${Object.keys(byNetwork).length} —Å–µ—Ç–µ–π —Å —Ç–æ—Ä–≥–æ–≤—ã–º–∏ —Ç–æ—á–∫–∞–º–∏:`, 'info');
                
                Object.keys(byNetwork).forEach(networkId => {
                    const points = byNetwork[networkId];
                    const isNetwork15 = networkId === NETWORK_15_UUID;
                    const status = isNetwork15 ? 'success' : 'info';
                    
                    addResult(`üè¢ –°–µ—Ç—å ${networkId}: ${points.length} —Ç–æ—á–µ–∫${isNetwork15 ? ' (–°–ï–¢–¨ 15 - –ù–û–†–î –õ–ê–ô–ù!)' : ''}`, status);
                });

            } catch (error) {
                addResult(`‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∞: ${error.message}`, 'error');
            }
        }

        window.openDiagnosticPages = function() {
            window.open('./debug-selectors.html', '_blank');
            window.open('./debug-selector-issue.html', '_blank');
        }

        function addResult(message, type = 'info') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = type;
            div.textContent = message;
            results.appendChild(div);
            console.log(message);
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ–º –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', function() {
            addResult('üîß –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω–∞', 'info');
            addResult('üìã –°–ª–µ–¥—É–π—Ç–µ –ø–æ—à–∞–≥–æ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤—ã—à–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º—ã', 'info');
            testNetwork15Only();
        });
    </script>
</body>
</html>