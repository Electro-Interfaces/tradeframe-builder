<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ HTTP –∫–ª–∏–µ–Ω—Ç–∞</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 20px;
            background: #1a1a1a;
            color: #e0e0e0;
        }
        .container { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 20px; 
        }
        .section { 
            background: #2a2a2a; 
            border: 1px solid #444; 
            border-radius: 8px; 
            padding: 20px; 
        }
        .section h3 { 
            color: #4CAF50; 
            margin-top: 0; 
        }
        button { 
            background: #4CAF50; 
            color: white; 
            border: none; 
            padding: 10px 15px; 
            border-radius: 4px; 
            cursor: pointer; 
            margin: 5px; 
            min-width: 120px;
        }
        button:hover { background: #45a049; }
        button:disabled { 
            background: #666; 
            cursor: not-allowed; 
        }
        pre { 
            background: #333; 
            padding: 15px; 
            border-radius: 4px; 
            overflow-x: auto; 
            border-left: 4px solid #4CAF50;
            white-space: pre-wrap;
            font-size: 12px;
        }
        .error { border-left-color: #f44336; background: #2a1a1a; }
        .info { border-left-color: #2196F3; background: #1a1a2a; }
        .input-group { 
            margin: 10px 0; 
        }
        .input-group label { 
            display: block; 
            margin-bottom: 5px; 
            font-weight: bold; 
        }
        .input-group input, .input-group select { 
            width: 100%; 
            padding: 8px; 
            border: 1px solid #555; 
            border-radius: 4px; 
            background: #333; 
            color: #e0e0e0;
        }
        .status { 
            padding: 10px; 
            border-radius: 4px; 
            margin: 10px 0; 
        }
        .status.success { background: #1b5e20; border: 1px solid #4CAF50; }
        .status.error { background: #b71c1c; border: 1px solid #f44336; }
        .status.warning { background: #e65100; border: 1px solid #ff9800; }
        .config-info { 
            background: #1a2332; 
            border: 1px solid #2196F3; 
            padding: 15px; 
            border-radius: 8px; 
            margin: 10px 0; 
        }
        .spinner {
            border: 2px solid #333;
            border-top: 2px solid #4CAF50;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <h1>üåê –¢–µ—Å—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ HTTP –∫–ª–∏–µ–Ω—Ç–∞</h1>
    <p><strong>–¶–µ–ª—å:</strong> –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ API –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏"</p>

    <div class="container">
        <!-- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è -->
        <div class="section">
            <h3>üìã –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</h3>
            <button onclick="loadConfig()">üîÑ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é</button>
            <div id="configInfo" class="config-info">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é...</div>
        </div>

        <!-- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è -->
        <div class="section">
            <h3>üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π</h3>
            <button onclick="testExternalApi()">üåê –¢–µ—Å—Ç –≤–Ω–µ—à–Ω–µ–≥–æ API</button>
            <button onclick="testSupabase()">üóÑÔ∏è –¢–µ—Å—Ç Supabase</button>
            <div id="connectionResults"></div>
        </div>

        <!-- –†–µ–∑–µ—Ä–≤—É–∞—Ä—ã -->
        <div class="section">
            <h3>üõ¢Ô∏è –¢–µ—Å—Ç —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–æ–≤</h3>
            <div class="input-group">
                <label>System ID:</label>
                <input type="text" id="systemId" value="1" placeholder="–í–≤–µ–¥–∏—Ç–µ System ID">
            </div>
            <div class="input-group">
                <label>Station ID:</label>
                <input type="text" id="stationId" value="1" placeholder="–í–≤–µ–¥–∏—Ç–µ Station ID">
            </div>
            <button onclick="getTanks()">üõ¢Ô∏è –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∑–µ—Ä–≤—É–∞—Ä—ã</button>
            <div id="tanksResults"></div>
        </div>

        <!-- –¶–µ–Ω—ã -->
        <div class="section">
            <h3>üí∞ –¢–µ—Å—Ç —Ü–µ–Ω</h3>
            <button onclick="getFuelPrices()">üí∞ –ü–æ–ª—É—á–∏—Ç—å —Ü–µ–Ω—ã</button>
            <button onclick="testSetPrices()">üìä –¢–µ—Å—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ü–µ–Ω</button>
            <div id="pricesResults"></div>
        </div>

        <!-- –û–ø–µ—Ä–∞—Ü–∏–∏ -->
        <div class="section">
            <h3>üßæ –¢–µ—Å—Ç –æ–ø–µ—Ä–∞—Ü–∏–π</h3>
            <button onclick="getOperations()">üßæ –ü–æ–ª—É—á–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏</button>
            <div id="operationsResults"></div>
        </div>

        <!-- –õ–æ–≥–∏ -->
        <div class="section">
            <h3>üìù –õ–æ–≥–∏ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h3>
            <button onclick="clearLogs()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏</button>
            <button onclick="downloadLogs()">üíæ –°–∫–∞—á–∞—Ç—å –ª–æ–≥–∏</button>
            <pre id="logs">–õ–æ–≥–∏ –±—É–¥—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å...</pre>
        </div>
    </div>

    <script type="module">
        import { httpClient } from './src/services/universalHttpClient.js';
        import { newTradingNetworkAPI } from './src/services/tradingNetworkAPI.js';
        import { apiEndpoints } from './src/services/apiEndpoints.js';

        window.logs = [];

        function addLog(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${type.toUpperCase()}: ${message}`;
            window.logs.push(logEntry);
            
            const logsElement = document.getElementById('logs');
            logsElement.textContent = window.logs.join('\n');
            logsElement.scrollTop = logsElement.scrollHeight;
            
            console.log(logEntry);
        }

        function showStatus(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            element.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        function showSpinner(elementId, message) {
            const element = document.getElementById(elementId);
            element.innerHTML = `<div class="status info"><span class="spinner"></span>${message}</div>`;
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        window.loadConfig = async function() {
            addLog('üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏...');
            
            try {
                const configInfo = await httpClient.getConfigurationInfo();
                
                const configHtml = `
                    <h4>üåê –í–Ω–µ—à–Ω–∏–π API</h4>
                    <p><strong>–í–∫–ª—é—á–µ–Ω:</strong> ${configInfo.externalApi.enabled ? '‚úÖ –î–∞' : '‚ùå –ù–µ—Ç'}</p>
                    <p><strong>URL:</strong> ${configInfo.externalApi.baseUrl}</p>
                    <p><strong>–¢–∏–ø –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:</strong> ${configInfo.externalApi.authType}</p>
                    <p><strong>–ï—Å—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:</strong> ${configInfo.externalApi.hasCredentials ? '‚úÖ –î–∞' : '‚ùå –ù–µ—Ç'}</p>
                    
                    <h4>üóÑÔ∏è Supabase</h4>
                    <p><strong>URL:</strong> ${configInfo.supabase.url}</p>
                    <p><strong>–¢–∏–ø:</strong> ${configInfo.supabase.type}</p>
                    <p><strong>–ï—Å—Ç—å API –∫–ª—é—á:</strong> ${configInfo.supabase.hasApiKey ? '‚úÖ –î–∞' : '‚ùå –ù–µ—Ç'}</p>
                `;
                
                document.getElementById('configInfo').innerHTML = configHtml;
                addLog('‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ');
            } catch (error) {
                addLog(`‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: ${error.message}`, 'error');
                showStatus('configInfo', `–û—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        };

        // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ API
        window.testExternalApi = async function() {
            addLog('üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –≤–Ω–µ—à–Ω–µ–º—É API...');
            showSpinner('connectionResults', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ API...');
            
            try {
                const result = await newTradingNetworkAPI.testConnection();
                
                if (result.success) {
                    showStatus('connectionResults', 
                        `‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≤–Ω–µ—à–Ω–µ–º—É API —É—Å–ø–µ—à–Ω–æ! –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: ${result.responseTime}–º—Å`, 
                        'success'
                    );
                    addLog(`‚úÖ –í–Ω–µ—à–Ω–∏–π API: –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ (${result.responseTime}–º—Å)`);
                } else {
                    showStatus('connectionResults', 
                        `‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –≤–Ω–µ—à–Ω–µ–º—É API: ${result.error}`, 
                        'error'
                    );
                    addLog(`‚ùå –í–Ω–µ—à–Ω–∏–π API: –æ—à–∏–±–∫–∞ - ${result.error}`, 'error');
                }
            } catch (error) {
                showStatus('connectionResults', `‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
                addLog(`‚ùå –í–Ω–µ—à–Ω–∏–π API: –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ - ${error.message}`, 'error');
            }
        };

        // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Supabase
        window.testSupabase = async function() {
            addLog('üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Supabase...');
            showSpinner('connectionResults', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Supabase...');
            
            try {
                const response = await httpClient.get('/rest/v1/', {
                    destination: 'supabase'
                });
                
                if (response.success) {
                    showStatus('connectionResults', 
                        `‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase —É—Å–ø–µ—à–Ω–æ! –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: ${response.responseTime}–º—Å`, 
                        'success'
                    );
                    addLog(`‚úÖ Supabase: –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ (${response.responseTime}–º—Å)`);
                } else {
                    showStatus('connectionResults', 
                        `‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Supabase: ${response.error}`, 
                        'error'
                    );
                    addLog(`‚ùå Supabase: –æ—à–∏–±–∫–∞ - ${response.error}`, 'error');
                }
            } catch (error) {
                showStatus('connectionResults', `‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
                addLog(`‚ùå Supabase: –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ - ${error.message}`, 'error');
            }
        };

        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–æ–≤
        window.getTanks = async function() {
            const systemId = document.getElementById('systemId').value;
            const stationId = document.getElementById('stationId').value;
            
            addLog(`üõ¢Ô∏è –ó–∞–ø—Ä–æ—Å —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–æ–≤: system=${systemId}, station=${stationId}`);
            showSpinner('tanksResults', '–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–æ–≤...');
            
            try {
                const tanks = await newTradingNetworkAPI.getTanks(systemId, stationId);
                
                showStatus('tanksResults', 
                    `‚úÖ –ü–æ–ª—É—á–µ–Ω–æ ${tanks.length} —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–æ–≤`, 
                    'success'
                );
                addLog(`‚úÖ –†–µ–∑–µ—Ä–≤—É–∞—Ä—ã: –ø–æ–ª—É—á–µ–Ω–æ ${tanks.length} –∑–∞–ø–∏—Å–µ–π`);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ 3 —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–∞
                if (tanks.length > 0) {
                    const preview = tanks.slice(0, 3).map(tank => 
                        `–†–µ–∑–µ—Ä–≤—É–∞—Ä ${tank.number}: ${tank.fuel_name}, ${tank.volume} –ª`
                    ).join('\n');
                    
                    document.getElementById('tanksResults').innerHTML += 
                        `<pre class="info">${preview}${tanks.length > 3 ? `\n... –∏ –µ—â–µ ${tanks.length - 3}` : ''}</pre>`;
                }
            } catch (error) {
                showStatus('tanksResults', `‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
                addLog(`‚ùå –†–µ–∑–µ—Ä–≤—É–∞—Ä—ã: –æ—à–∏–±–∫–∞ - ${error.message}`, 'error');
            }
        };

        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ü–µ–Ω
        window.getFuelPrices = async function() {
            const systemId = document.getElementById('systemId').value;
            const stationId = document.getElementById('stationId').value;
            
            addLog(`üí∞ –ó–∞–ø—Ä–æ—Å —Ü–µ–Ω: system=${systemId}, station=${stationId}`);
            showSpinner('pricesResults', '–ü–æ–ª—É—á–µ–Ω–∏–µ —Ü–µ–Ω...');
            
            try {
                const prices = await newTradingNetworkAPI.getFuelPrices(systemId, stationId);
                
                const pricesCount = Object.keys(prices).length;
                showStatus('pricesResults', 
                    `‚úÖ –ü–æ–ª—É—á–µ–Ω—ã —Ü–µ–Ω—ã –¥–ª—è ${pricesCount} –≤–∏–¥–æ–≤ —Ç–æ–ø–ª–∏–≤–∞`, 
                    'success'
                );
                addLog(`‚úÖ –¶–µ–Ω—ã: –ø–æ–ª—É—á–µ–Ω–æ ${pricesCount} –∑–∞–ø–∏—Å–µ–π`);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ü–µ–Ω—ã
                const pricesText = Object.entries(prices)
                    .map(([fuel, price]) => `${fuel}: ${price} —Ä—É–±/–ª`)
                    .join('\n');
                
                document.getElementById('pricesResults').innerHTML += 
                    `<pre class="info">${pricesText}</pre>`;
            } catch (error) {
                showStatus('pricesResults', `‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
                addLog(`‚ùå –¶–µ–Ω—ã: –æ—à–∏–±–∫–∞ - ${error.message}`, 'error');
            }
        };

        // –¢–µ—Å—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ü–µ–Ω
        window.testSetPrices = async function() {
            const systemId = document.getElementById('systemId').value;
            const stationId = document.getElementById('stationId').value;
            
            const testPrices = {
                '–ê–ò-92': 56.50,
                '–ê–ò-95': 60.00,
                '–î–¢': 62.00
            };
            
            addLog(`üìä –¢–µ—Å—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ü–µ–Ω: ${JSON.stringify(testPrices)}`);
            showSpinner('pricesResults', '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ü–µ–Ω...');
            
            try {
                const success = await newTradingNetworkAPI.setFuelPrices(systemId, stationId, testPrices);
                
                if (success) {
                    showStatus('pricesResults', '‚úÖ –¶–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã', 'success');
                    addLog('‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–µ–Ω: —É—Å–ø–µ—à–Ω–æ');
                } else {
                    showStatus('pricesResults', '‚ùå –û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ü–µ–Ω', 'error');
                    addLog('‚ùå –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–µ–Ω: –Ω–µ—É–¥–∞—á–∞', 'error');
                }
            } catch (error) {
                showStatus('pricesResults', `‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
                addLog(`‚ùå –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–µ–Ω: –æ—à–∏–±–∫–∞ - ${error.message}`, 'error');
            }
        };

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
        window.getOperations = async function() {
            const systemId = document.getElementById('systemId').value;
            const stationId = document.getElementById('stationId').value;
            
            addLog(`üßæ –ó–∞–ø—Ä–æ—Å –æ–ø–µ—Ä–∞—Ü–∏–π: system=${systemId}, station=${stationId}`);
            showSpinner('operationsResults', '–ü–æ–ª—É—á–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π...');
            
            try {
                const operations = await newTradingNetworkAPI.getOperations(systemId, stationId, {
                    limit: 10
                });
                
                showStatus('operationsResults', 
                    `‚úÖ –ü–æ–ª—É—á–µ–Ω–æ ${operations.length} –æ–ø–µ—Ä–∞—Ü–∏–π`, 
                    'success'
                );
                addLog(`‚úÖ –û–ø–µ—Ä–∞—Ü–∏–∏: –ø–æ–ª—É—á–µ–Ω–æ ${operations.length} –∑–∞–ø–∏—Å–µ–π`);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ 3 –æ–ø–µ—Ä–∞—Ü–∏–∏
                if (operations.length > 0) {
                    const preview = operations.slice(0, 3).map(op => 
                        `${op.timestamp}: ${op.volume}–ª, ${op.amount} —Ä—É–±`
                    ).join('\n');
                    
                    document.getElementById('operationsResults').innerHTML += 
                        `<pre class="info">${preview}${operations.length > 3 ? `\n... –∏ –µ—â–µ ${operations.length - 3}` : ''}</pre>`;
                }
            } catch (error) {
                showStatus('operationsResults', `‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
                addLog(`‚ùå –û–ø–µ—Ä–∞—Ü–∏–∏: –æ—à–∏–±–∫–∞ - ${error.message}`, 'error');
            }
        };

        // –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤
        window.clearLogs = function() {
            window.logs = [];
            document.getElementById('logs').textContent = '–õ–æ–≥–∏ –æ—á–∏—â–µ–Ω—ã...';
            addLog('üóëÔ∏è –õ–æ–≥–∏ –æ—á–∏—â–µ–Ω—ã');
        };

        // –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤
        window.downloadLogs = function() {
            const logsText = window.logs.join('\n');
            const blob = new Blob([logsText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `http-client-test-${new Date().toISOString().slice(0, 19)}.log`;
            a.click();
            
            URL.revokeObjectURL(url);
            addLog('üíæ –õ–æ–≥–∏ —Å–∫–∞—á–∞–Ω—ã');
        };

        // –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', () => {
            addLog('üöÄ –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            loadConfig();
        });
    </script>
</body>
</html>