# üîå API –¢–æ—Ä–≥–æ–≤–æ–π –°–µ—Ç–∏ (–¢–°) - –û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

**–î–∞—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: 2025-09-05 18:30  
**API URL**: https://pos.autooplata.ru/tms  
**–°–∏—Å—Ç–µ–º–∞ ID**: 15

## üìä –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å

‚úÖ **API –¥–æ—Å—Ç—É–ø–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç**  
‚ö†Ô∏è **–ù–µ –≤—Å–µ —Å—Ç–∞–Ω—Ü–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã**  
üîê **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–∞**

---

## üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

### ‚úÖ POST /v1/login - –†–∞–±–æ—Ç–∞–µ—Ç
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ 200 OK
- **–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: `UserApi / lHQfLZHzB3tn`
- **–û—Ç–≤–µ—Ç**: JWT —Ç–æ–∫–µ–Ω (307 –±–∞–π—Ç)
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞**: ~100–º—Å
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –û—Ç–ª–∏—á–Ω–æ

---

## üìã –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —É—Å–ª—É–≥

### ‚úÖ GET /v1/services - –†–∞–±–æ—Ç–∞–µ—Ç
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ 200 OK
- **–î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∏–¥—ã —Ç–æ–ø–ª–∏–≤–∞**: 7 —Ç–∏–ø–æ–≤

| –ö–æ–¥ | –ù–∞–∑–≤–∞–Ω–∏–µ |
|-----|----------|
| 1 | –ê–ò-100 |
| 2 | –ê–ò-92 |
| 3 | –ê–ò-95 |
| 4 | –ê–ò-98 |
| 5 | –î–∏–∑–µ–ª—å–Ω–æ–µ —Ç–æ–ø–ª–∏–≤–æ |
| 6 | –î–∏–∑–µ–ª—å–Ω–æ–µ —Ç–æ–ø–ª–∏–≤–æ –∑–∏–º. |
| 7 | –°–∂–∏–∂–µ–Ω—ã–π –≥–∞–∑ |

---

## üè≠ –°—Ç–∞–Ω—Ü–∏–∏ –∏ —Ü–µ–Ω—ã

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏–π (1-100):

| –°—Ç–∞–Ω—Ü–∏—è | –°—Ç–∞—Ç—É—Å | –í–∏–¥—ã —Ç–æ–ø–ª–∏–≤–∞ | –¶–µ–Ω—ã (—Ä—É–±/–ª) |
|---------|--------|-------------|-------------|
| 0-3 | ‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω—ã | - | - |
| **4** | ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢** | 3 —Ç–∏–ø–∞ | –î–¢: 65.0, –ê–ò-92: 54.0, –ê–ò-95: 57.0 |
| **5** | ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢** | 6 —Ç–∏–ø–æ–≤ | –î–¢: 67.5, –ê–ò-92: 55.3, –ê–ò-98: 86.5, –ê–ò-95: 59.9, –î–¢ –∑–∏–º: 68.0, –ê–ò-100: 82.0 |
| 6-100 | ‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω—ã | - | - |

### üéØ –†–∞–±–æ—á–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- **–°—Ç–∞–Ω—Ü–∏—è ‚Ññ4**: –û—Å–Ω–æ–≤–Ω—ã–µ –≤–∏–¥—ã (–î–¢, –ê–ò-92, –ê–ò-95)
- **–°—Ç–∞–Ω—Ü–∏—è ‚Ññ5**: –ü–æ–ª–Ω—ã–π –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç (6 –≤–∏–¥–æ–≤ —Ç–æ–ø–ª–∏–≤–∞)

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è

### GET /v1/info - –°—Ç–∞—Ç—É—Å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è

**–°—Ç–∞–Ω—Ü–∏—è ‚Ññ4**: ‚úÖ –î–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã
```json
{
  "system": 15,
  "station": 4,
  "shift": {"number": 8, "state": "–û—Ç–∫—Ä—ã—Ç–∞—è"},
  "pos": [{
    "number": 1,
    "dt_info": "2025-09-05T18:27:24",
    "uptime": "2025-09-05T13:53:23",
    "devices": [
      {"name": "–§–∏—Å–∫–∞–ª—å–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä", "state": "OK"},
      {"name": "–ö—É–ø—é—Ä–æ–ø—Ä–∏–µ–º–Ω–∏–∫", "state": "OK"},
      {"name": "–ö–∞—Ä—Ç—Ä–∏–¥–µ—Ä", "state": "OK"},
      {"name": "–ú–ü–°-—Ä–∏–¥–µ—Ä", "state": "OK"}
    ]
  }]
}
```

**–°—Ç–∞–Ω—Ü–∏—è ‚Ññ5**: ‚ö†Ô∏è –ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç `[]`

---

## üö® –ü—Ä–æ–±–ª–µ–º—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 1. –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–æ–º–µ—Ä–æ–≤ —Å—Ç–∞–Ω—Ü–∏–π
- **–õ–æ–∫–∞–ª—å–Ω–∞—è –Ω—É–º–µ—Ä–∞—Ü–∏—è**: –ê–ó–° ‚Ññ1, ‚Ññ2, ‚Ññ3, ‚Ññ5
- **API –Ω—É–º–µ—Ä–∞—Ü–∏—è**: –°—Ç–∞–Ω—Ü–∏–∏ ‚Ññ4, ‚Ññ5
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ú–∞–ø–ø–∏–Ω–≥ –≤ `src/services/tradingNetworkAPI.ts:37` –Ω–µ–∞–∫—Ç—É–∞–ª–µ–Ω

### 2. CORS –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- **–°–∏–º–ø—Ç–æ–º**: –û—à–∏–±–∫–∏ 500 –≤ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- **–ü—Ä–∏—á–∏–Ω–∞**: –ü–æ–ª–∏—Ç–∏–∫–∞ CORS –¥–ª—è –º–µ–∂–¥–æ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–†–µ—à–µ–Ω–∏–µ**: API —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (curl)

### 3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
- **Swagger**: `/docs/swagger.json` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404
- **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞**: –ò—Å–ø–æ–ª—å–∑—É–µ–º –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 1. –û–±–Ω–æ–≤–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞–Ω—Ü–∏–π
```javascript
// –í src/services/tradingNetworkAPI.ts
const stationToUuidMapping: Record<number, string> = {
  4: 'point4-uuid',   // –ê–ó–° ‚Ññ004 - –†–∞–±–æ—á–∞—è –≤ API
  5: 'point5-uuid',   // –ê–ó–° ‚Ññ005 - –†–∞–±–æ—á–∞—è –≤ API
  // 1,2,3 - –ø–æ–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –≤ API
};
```

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–±–æ—á–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏ –¥–ª—è –¥–µ–º–æ
- **–î–ª—è –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö**: –°—Ç–∞–Ω—Ü–∏–∏ 4 –∏ 5
- **–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–Ω**: –°—Ç–∞–Ω—Ü–∏—è 5 (–±–æ–ª—å—à–µ –≤–∏–¥–æ–≤ —Ç–æ–ø–ª–∏–≤–∞)
- **–î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**: –°—Ç–∞–Ω—Ü–∏—è 4 (–µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è)

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```javascript
// –í–∫–ª—é—á–∏—Ç—å MOCK —Ä–µ–∂–∏–º –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
const USE_MOCK_MODE = process.env.NODE_ENV === 'development';
```

---

## üéØ –ì–æ—Ç–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```bash
curl -X POST "https://pos.autooplata.ru/tms/v1/login" \
  -H "Content-Type: application/json" \
  -d '{"username":"UserApi","password":"lHQfLZHzB3tn"}'
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ü–µ–Ω —Å—Ç–∞–Ω—Ü–∏–∏ 5
```bash
curl -H "Authorization: Bearer {TOKEN}" \
  "https://pos.autooplata.ru/tms/v1/pos/prices/5?system=15"
```

### –°—Ç–∞—Ç—É—Å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è —Å—Ç–∞–Ω—Ü–∏–∏ 4
```bash
curl -H "Authorization: Bearer {TOKEN}" \
  "https://pos.autooplata.ru/tms/v1/info?system=15&station=4"
```

---

## üìà –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** –º–∞–ø–ø–∏–Ω–≥–∞ —Å—Ç–∞–Ω—Ü–∏–π
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É —Ü–µ–Ω** –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏ 4/5
3. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫** –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç–∞–Ω—Ü–∏–π

**–°—Ç–∞—Ç—É—Å API**: üü¢ –ì–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ –ø–æ —Å—Ç–∞–Ω—Ü–∏—è–º