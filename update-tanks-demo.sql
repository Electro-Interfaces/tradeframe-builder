-- Обновление резервуаров для демонстрации различных сценариев состояния
-- АЗС Демо сети

-- 1. АЗС №001 - Центральная: Резервуар АИ-92 - КРИТИЧЕСКИЙ УРОВЕНЬ + неисправный датчик температуры
UPDATE equipment 
SET params = jsonb_set(
  jsonb_set(
    jsonb_set(
      jsonb_set(
        jsonb_set(
          params, 
          '{Текущий уровень (л)}', 
          '2500'::jsonb
        ),
        '{Книжный остаток}', 
        '2400'::jsonb
      ),
      '{Подтоварная вода}', 
      '8'::jsonb
    ),
    '{Температура}', 
    '16'::jsonb
  ),
  '{Датчики}', 
  '[
    {"название": "Уровень", "статус": "ok"}, 
    {"название": "Температура", "статус": "error"}
  ]'::jsonb
)
WHERE display_name = 'Резервуар АИ-92 - АЗС №001 - Центральная';

-- 2. АЗС №001 - Центральная: Резервуар АИ-95 - НОРМАЛЬНЫЙ УРОВЕНЬ + высокая температура  
UPDATE equipment 
SET params = jsonb_set(
  jsonb_set(
    jsonb_set(
      jsonb_set(
        params, 
        '{Текущий уровень (л)}', 
        '32500'::jsonb
      ),
      '{Книжный остаток}', 
      '32200'::jsonb
    ),
    '{Подтоварная вода}', 
    '2'::jsonb
  ),
  '{Температура}', 
  '42'::jsonb
)
WHERE display_name = 'Резервуар АИ-95 - АЗС №001 - Центральная';

-- 3. АЗС №002 - Северная: Резервуар АИ-92 - МИНИМАЛЬНЫЙ УРОВЕНЬ + высокий уровень воды
UPDATE equipment 
SET params = jsonb_set(
  jsonb_set(
    jsonb_set(
      jsonb_set(
        params, 
        '{Текущий уровень (л)}', 
        '7200'::jsonb
      ),
      '{Книжный остаток}', 
      '7100'::jsonb
    ),
    '{Подтоварная вода}', 
    '12'::jsonb
  ),
  '{Температура}', 
  '15'::jsonb
)
WHERE display_name = 'Резервуар АИ-92 - АЗС №002 - Северная';

-- 4. АЗС №002 - Северная: Резервуар АИ-95 - ПОЛНЫЙ резервуар (недавно заправленный)
UPDATE equipment 
SET params = jsonb_set(
  jsonb_set(
    jsonb_set(
      params, 
      '{Текущий уровень (л)}', 
      '38000'::jsonb
    ),
    '{Книжный остаток}', 
    '37800'::jsonb
  ),
  '{Подтоварная вода}', 
  '0'::jsonb
)
WHERE display_name = 'Резервуар АИ-95 - АЗС №002 - Северная';

-- 5. АЗС №002 - Северная: Резервуар Дизель - СРЕДНИЙ УРОВЕНЬ + отключенные уведомления
UPDATE equipment 
SET params = jsonb_set(
  jsonb_set(
    jsonb_set(
      params, 
      '{Текущий уровень (л)}', 
      '20250'::jsonb
    ),
    '{Книжный остаток}', 
    '20100'::jsonb
  ),
  '{Настройки уведомлений}', 
  '{
    "включены": false,
    "уведомления о сливе": false,
    "уведомления об уровне": false
  }'::jsonb
)
WHERE display_name = 'Резервуар Дизель - АЗС №002 - Северная';

-- 6. АЗС №003 - Южная: Резервуар АИ-92 - ОТЛИЧНЫЙ УРОВЕНЬ
UPDATE equipment 
SET params = jsonb_set(
  jsonb_set(
    jsonb_set(
      params, 
      '{Текущий уровень (л)}', 
      '44000'::jsonb
    ),
    '{Книжный остаток}', 
    '43800'::jsonb
  ),
  '{Подтоварная вода}', 
  '1'::jsonb
)
WHERE display_name = 'Резервуар АИ-92 - АЗС №003 - Южная';

-- 7. АЗС №003 - Южная: Резервуар АИ-95 - НИЗКИЙ УРОВЕНЬ + неисправный датчик уровня
UPDATE equipment 
SET params = jsonb_set(
  jsonb_set(
    jsonb_set(
      jsonb_set(
        params, 
        '{Текущий уровень (л)}', 
        '8250'::jsonb
      ),
      '{Книжный остаток}', 
      '8100'::jsonb
    ),
    '{Подтоварная вода}', 
    '4'::jsonb
  ),
  '{Датчики}', 
  '[
    {"название": "Уровень", "статус": "error"}, 
    {"название": "Температура", "статус": "ok"}
  ]'::jsonb
)
WHERE display_name = 'Резервуар АИ-95 - АЗС №003 - Южная';

-- 8. АЗС №003 - Южная: Резервуар АИ-98 - СРЕДНИЙ УРОВЕНЬ
UPDATE equipment 
SET params = jsonb_set(
  jsonb_set(
    jsonb_set(
      params, 
      '{Текущий уровень (л)}', 
      '16500'::jsonb
    ),
    '{Книжный остаток}', 
    '16350'::jsonb
  ),
  '{Подтоварная вода}', 
  '2'::jsonb
)
WHERE display_name = 'Резервуар АИ-98 - АЗС №003 - Южная';

-- 9. АЗС №003 - Южная: Резервуар Дизель - ВЫСОКИЙ УРОВЕНЬ
UPDATE equipment 
SET params = jsonb_set(
  jsonb_set(
    jsonb_set(
      params, 
      '{Текущий уровень (л)}', 
      '45000'::jsonb
    ),
    '{Книжный остаток}', 
    '44800'::jsonb
  ),
  '{Подтоварная вода}', 
  '1'::jsonb
)
WHERE display_name = 'Резервуар Дизель - АЗС №003 - Южная';

-- 10. АЗС №005 - Промзона: Резервуар АИ-95 - НОРМАЛЬНЫЙ УРОВЕНЬ
UPDATE equipment 
SET params = jsonb_set(
  jsonb_set(
    jsonb_set(
      params, 
      '{Текущий уровень (л)}', 
      '30000'::jsonb
    ),
    '{Книжный остаток}', 
    '29800'::jsonb
  ),
  '{Подтоварная вода}', 
  '3'::jsonb
)
WHERE display_name = 'Резервуар АИ-95 - АЗС №005 - Промзона';