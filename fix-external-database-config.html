<!DOCTYPE html>
<html>
<head>
    <title>Fix External Database Config</title>
</head>
<body>
    <script>
        // Устанавливаем настройки подключения к внешней базе данных
        const config = {
            url: 'https://ssvazdgnmatbdynkhkqo.supabase.co',
            apiKey: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNzdmF6ZGdubWF0YmR5bmtoa3FvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NzM0MzgzNCwiZXhwIjoyMDcyOTE5ODM0fQ.Gen-PI-vDkKjskpIvJNcQw0Uj3d0zGXB98zIxNK6di0',
            status: 'connected',
            lastUpdated: new Date().toISOString()
        };

        // Устанавливаем в localStorage
        localStorage.setItem('externalDatabase', JSON.stringify(config));
        console.log('✅ externalDatabase установлен:', config);

        // Также устанавливаем supabaseSettings для совместимости
        localStorage.setItem('supabaseSettings', JSON.stringify(config));
        console.log('✅ supabaseSettings установлен:', config);

        // Уведомляем приложение об изменениях
        window.dispatchEvent(new Event('storage'));
        window.dispatchEvent(new CustomEvent('localStorageChanged'));
        
        alert('Настройки подключения к базе данных установлены! Обновите страницу с пользователями/ролями.');
        
        // Автоматически закрываем через 2 секунды
        setTimeout(() => {
            window.close();
        }, 2000);
    </script>
</body>
</html>