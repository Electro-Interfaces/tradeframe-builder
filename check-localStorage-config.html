<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ localStorage</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #1a1a1a; color: #fff; }
        .success { color: #4ade80; }
        .error { color: #f87171; }
        .warning { color: #fbbf24; }
        pre { background: #262626; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>üì± –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ localStorage</h1>
    <div id="results"></div>
    <button onclick="createBaseConfig()" style="margin: 10px; padding: 10px; background: #2563eb; color: white; border: none; border-radius: 4px;">–°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é</button>

    <script>
        const results = document.getElementById('results');
        
        function log(message, type = 'info') {
            const className = type;
            results.innerHTML += `<div class="${className}">${message}</div>`;
        }

        function checkConfig() {
            log('üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º localStorage...', 'info');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª—é—á–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ç–æ—Ä–≥–æ–≤–æ–π —Å–µ—Ç–∏
            const tradingConfigKey = 'tradingNetworkConfig';
            const tradingConfig = localStorage.getItem(tradingConfigKey);
            
            if (!tradingConfig) {
                log('‚ùå –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–æ—Ä–≥–æ–≤–æ–π —Å–µ—Ç–∏ –ù–ï –Ω–∞–π–¥–µ–Ω–∞ –≤ localStorage!', 'error');
                log('   –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –∏–ª–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ "–û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏"', 'warning');
            } else {
                log('‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–æ—Ä–≥–æ–≤–æ–π —Å–µ—Ç–∏ –Ω–∞–π–¥–µ–Ω–∞', 'success');
                try {
                    const config = JSON.parse(tradingConfig);
                    results.innerHTML += '<pre>' + JSON.stringify(config, null, 2) + '</pre>';
                    
                    if (!config.enabled) {
                        log('‚ö†Ô∏è –¢–æ—Ä–≥–æ–≤–∞—è —Å–µ—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω–∞!', 'warning');
                    }
                    if (!config.baseUrl) {
                        log('‚ö†Ô∏è –ë–∞–∑–æ–≤—ã–π URL –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω!', 'warning');
                    }
                    if (!config.endpoints?.tanks) {
                        log('‚ö†Ô∏è –≠–Ω–¥–ø–æ–∏–Ω—Ç —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–æ–≤ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω!', 'warning');
                    }
                } catch (error) {
                    log('‚ùå –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: ' + error.message, 'error');
                }
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é —Ç–æ—Ä–≥–æ–≤—É—é —Ç–æ—á–∫—É
            const selectedPointId = localStorage.getItem('selectedTradingPointId');
            if (!selectedPointId || selectedPointId === 'all') {
                log('‚ùå –¢–æ—Ä–≥–æ–≤–∞—è —Ç–æ—á–∫–∞ –Ω–µ –≤—ã–±—Ä–∞–Ω–∞!', 'error');
                log('   –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ç–æ—Ä–≥–æ–≤—É—é —Ç–æ—á–∫—É –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ', 'warning');
            } else {
                log(`‚úÖ –í—ã–±—Ä–∞–Ω–∞ —Ç–æ—Ä–≥–æ–≤–∞—è —Ç–æ—á–∫–∞: ${selectedPointId}`, 'success');
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –∫–ª—é—á–∏ –≤ localStorage
            log('\nüìã –í—Å–µ –∫–ª—é—á–∏ –≤ localStorage:', 'info');
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                const value = localStorage.getItem(key);
                log(`${key}: ${value ? value.substring(0, 100) + '...' : '–ø—É—Å—Ç–æ'}`, 'info');
            }
        }

        function createBaseConfig() {
            log('\nüèóÔ∏è –°–æ–∑–¥–∞–µ–º –±–∞–∑–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é...', 'info');
            
            const config = {
                enabled: true,
                baseUrl: 'https://api.example.com',
                apiKey: 'your-api-key-here',
                authType: 'bearer',
                timeout: 30000,
                maxRetries: 3,
                endpoints: {
                    tanks: '/api/tanks',
                    operations: '/api/operations',
                    prices: '/api/prices'
                },
                networkId: 'main-network'
            };
            
            localStorage.setItem('tradingNetworkConfig', JSON.stringify(config));
            log('‚úÖ –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞', 'success');
            log('‚ö†Ô∏è –í–ê–ñ–ù–û: –ó–∞–º–µ–Ω–∏—Ç–µ URL –∏ API –∫–ª—é—á –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è!', 'warning');
            
            // –ü–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—è–µ–º
            checkConfig();
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É
        checkConfig();
    </script>
</body>
</html>