# üìä –û—Ç—á–µ—Ç –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö –≤ TradeFrame

## üéØ –¶–µ–ª—å –∞–Ω–∞–ª–∏–∑–∞
–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ —Å–∏—Å—Ç–µ–º—ã TradeFrame —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö (–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö vs STS API) –∏ –≤—ã—è–≤–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.

## üìÖ –î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞
13 —Å–µ–Ω—Ç—è–±—Ä—è 2025 –≥–æ–¥–∞

---

## üîç –ê–ù–ê–õ–ò–ó –û–°–ù–û–í–ù–´–• –†–ê–ó–î–ï–õ–û–í

### 1. üîß Equipment (–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ)
**–§–∞–π–ª:** `src/pages/Equipment.tsx`

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:**
- ‚úÖ **STS API** - –æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫
  - `stsApiService.getTerminalInfo()` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
  - `stsApiService.getTanks()` - –¥–∞–Ω–Ω—ã–µ —Ä–µ–∑–µ—Ä–≤—É–∞—Ä–æ–≤
  - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ localStorage: `sts-api-config`

**‚ùå –ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢:**
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Supabase
- –°–µ—Ä–≤–∏—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ß–ò–°–¢–´–ô** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ STS API

---

### 2. üìà NetworkOverview (–û–±–∑–æ—Ä —Å–µ—Ç–∏)
**–§–∞–π–ª:** `src/pages/NetworkOverview.tsx`

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:**
- ‚úÖ **STS API** - –æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫
  - `stsApiService.getTransactions()` - —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
  - `stsApiService.getTanks()` - —Ä–µ–∑–µ—Ä–≤—É–∞—Ä—ã
  - `stsApiService.getTerminalInfo()` - —Ç–µ—Ä–º–∏–Ω–∞–ª—ã
  - `stsApiService.getPrices()` - —Ü–µ–Ω—ã
- ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
  - `tradingPointsService.getById()` - —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ç–æ—Ä–≥–æ–≤–æ–π —Ç–æ—á–∫–∏

**‚ùå –ù–ï –°–û–•–†–ê–ù–Ø–ï–¢:**
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –ë–î
- –î–∞–Ω–Ω—ã–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –≤ –ë–î

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ß–ò–°–¢–´–ô** - –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ STS API, –º–∏–Ω–∏–º—É–º –ë–î –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

---

### 3. üí≥ OperationsTransactions (–û–ø–µ—Ä–∞—Ü–∏–∏)
**–§–∞–π–ª:** `src/pages/OperationsTransactionsPageSimple.tsx`

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:**
- ‚úÖ **STS API** - –æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫
  - `stsApiService.getTransactions()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- ‚ö†Ô∏è **–°–º–µ—à–∞–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**
  - `operationsService.forceReload()` - —Å–µ—Ä–≤–∏—Å —Å –ª–æ–≥–∏–∫–æ–π –ë–î
  - `operationsService.getAll()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–∑ –∫—ç—à–∞/–ë–î
  - `tradingPointsService.getById()` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

**‚ùó –ü–†–û–ë–õ–ï–ú–´:**
- –î–≤–æ–π—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å: –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ STS API, –Ω–æ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç operationsService
- operationsService –∏–º–µ–µ—Ç –ª–æ–≥–∏–∫—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î (Supabase)
- –í–æ–∑–º–æ–∂–Ω–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–æ–¥

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –û–ß–ò–°–¢–ö–ò** - —Å–º–µ—à–∞–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

---

### 4. üí∞ Prices (–¶–µ–Ω—ã)
**–§–∞–π–ª:** `src/pages/Prices.tsx`

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:**
- ‚úÖ **STS API** - –æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫
  - `stsApiService.getPrices()` - –æ—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–Ω—ã
- ‚ö†Ô∏è **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏**
  - `externalPricesService` - –≤–Ω–µ—à–Ω–∏–π API —Ü–µ–Ω
  - `pricesCacheService` - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω
  - `nomenclatureService` - –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ (–≤–æ–∑–º–æ–∂–Ω–æ –ë–î)
  - `tradingPointsService` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ

**‚ùó –ü–†–û–ë–õ–ï–ú–´:**
- –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω (–º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ë–î)
- Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –û–ß–ò–°–¢–ö–ò** - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏, —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞

---

## üõ†Ô∏è –ê–ù–ê–õ–ò–ó –ö–õ–Æ–ß–ï–í–´–• –°–ï–†–í–ò–°–û–í

### –°–µ—Ä–≤–∏—Å—ã —Å –ë–î (Supabase)
- ‚ùå `operationsService.ts` - —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫—É –¥–ª—è Supabase
- ‚ùå `tradingPointsService.ts` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Supabase –ë–î
- ‚ùå `pricesCache.ts` - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–≤–æ–∑–º–æ–∂–Ω–æ, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏/localStorage)

### –ß–∏—Å—Ç—ã–µ STS API —Å–µ—Ä–≤–∏—Å—ã
- ‚úÖ `stsApiService` - –ø—Ä—è–º–∞—è —Ä–∞–±–æ—Ç–∞ —Å STS API
- ‚úÖ `externalPricesService` - –≤–Ω–µ—à–Ω–∏–π API

---

## üö® –í–´–Ø–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### 1. **–£—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–æ–¥ –≤ operationsService**
- –°–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫—É –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ Supabase
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ OperationsTransactions, –Ω–æ –¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ STS API
- **–î–µ–π—Å—Ç–≤–∏–µ:** –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –±–µ–∑ –ë–î –ª–æ–≥–∏–∫–∏

### 2. **–î–≤–æ–π—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –≤ Prices**
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ fallback
- **–î–µ–π—Å—Ç–≤–∏–µ:** –£–ø—Ä–æ—Å—Ç–∏—Ç—å –¥–æ STS API + –∫—ç—à –≤ localStorage

### 3. **tradingPointsService –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ë–î**
- –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–≥–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- **–î–µ–π—Å—Ç–≤–∏–µ:** –õ–∏–±–æ –æ—Å—Ç–∞–≤–∏—Ç—å –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö, –ª–∏–±–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å

---

## ‚úÖ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –û–ß–ò–°–¢–ö–ï

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

1. **–û—á–∏—Å—Ç–∏—Ç—å operationsService.ts**
   - –£–±—Ä–∞—Ç—å –ª–æ–≥–∏–∫—É Supabase
   - –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏/localStorage
   - –£–ø—Ä–æ—Å—Ç–∏—Ç—å OperationsTransactions

2. **–£–ø—Ä–æ—Å—Ç–∏—Ç—å Prices.tsx**
   - –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫: STS API
   - Fallback: localStorage –∫—ç—à
   - –£–±—Ä–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã

3. **–ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å pricesCacheService**
   - –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –Ω–∞ localStorage
   - –£–±—Ä–∞—Ç—å –ë–î –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

4. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å tradingPointsService**
   - –ï—Å–ª–∏ –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö - –æ—Å—Ç–∞–≤–∏—Ç—å
   - –õ–∏–±–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

5. **–£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã**
   - –í—Å–µ *SupabaseService.ts —Ñ–∞–π–ª—ã
   - –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ë–î —Å–µ—Ä–≤–∏—Å—ã

---

## üìã –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï –ü–û –†–ê–ó–î–ï–õ–ê–ú

| –†–∞–∑–¥–µ–ª | STS API | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—á–∏—Å—Ç–∫–∏ |
|--------|---------|-------------|--------|-------------------|
| Equipment | ‚úÖ –¢–æ–ª—å–∫–æ | ‚ùå –ù–µ—Ç | ‚úÖ –ß–∏—Å—Ç—ã–π | - |
| NetworkOverview | ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π | ‚úÖ –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ | ‚úÖ –ù–æ—Ä–º–∞ | –ù–∏–∑–∫–∏–π |
| OperationsTransactions | ‚úÖ –î–∞–Ω–Ω—ã–µ | ‚ö†Ô∏è –°–µ—Ä–≤–∏—Å | ‚ö†Ô∏è –°–º–µ—à–∞–Ω–Ω—ã–π | üî¥ –í—ã—Å–æ–∫–∏–π |
| Prices | ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π | ‚ö†Ô∏è –ö—ç—à | ‚ö†Ô∏è –°–ª–æ–∂–Ω—ã–π | üü° –°—Ä–µ–¥–Ω–∏–π |

## üèÜ –ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê

**‚úÖ –•–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:** Equipment, NetworkOverview
**‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:** OperationsTransactions, Prices
**üéØ –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å:** –£–±—Ä–∞—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–æ–¥ –ë–î –∏–∑ –æ–ø–µ—Ä–∞—Ü–∏–π –∏ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É —Ü–µ–Ω

---

## üìù –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

1. **–ù–µ–¥–µ–ª—è 1:** –û—á–∏—Å—Ç–∫–∞ operationsService –∏ OperationsTransactions
2. **–ù–µ–¥–µ–ª—è 2:** –£–ø—Ä–æ—â–µ–Ω–∏–µ Prices –∏ pricesCacheService
3. **–ù–µ–¥–µ–ª—è 3:** –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ë–î —Å–µ—Ä–≤–∏—Å–æ–≤
4. **–ù–µ–¥–µ–ª—è 4:** –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å STS API + localStorage –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è, –±–µ–∑ —Å–ª–æ–∂–Ω–æ–π –ë–î –ª–æ–≥–∏–∫–∏.