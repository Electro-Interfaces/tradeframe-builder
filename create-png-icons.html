<!DOCTYPE html>
<html>
<head>
    <title>üé® –°–æ–∑–¥–∞–Ω–∏–µ PNG –∏–∫–æ–Ω–æ–∫ - TradeControl PWA</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #0f172a; 
            color: white; 
            text-align: center;
        }
        .canvas-container { display: inline-block; margin: 10px; }
        .download-btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            margin: 5px;
        }
        .download-btn:hover { background: #2563eb; }
        .download-all {
            background: #10b981;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin: 20px;
        }
        .download-all:hover { background: #059669; }
        h1 { color: #3b82f6; }
        .preview { max-width: 64px; max-height: 64px; border: 1px solid #3b82f6; margin: 5px; }
    </style>
</head>
<body>
    <h1>üé® –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä PNG –∏–∫–æ–Ω–æ–∫ TradeControl</h1>
    <p>–°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö PNG –∏–∫–æ–Ω–æ–∫ –¥–ª—è PWA</p>
    
    <button onclick="generateAllIcons()" class="download-all">
        üöÄ –°–æ–∑–¥–∞—Ç—å –≤—Å–µ PNG –∏–∫–æ–Ω–∫–∏
    </button>
    
    <button onclick="downloadAllIcons()" class="download-all">
        üì¶ –°–∫–∞—á–∞—Ç—å –≤—Å–µ –∏–∫–æ–Ω–∫–∏ –æ–¥–Ω–∏–º –∞—Ä—Ö–∏–≤–æ–º
    </button>
    
    <div id="icons-container"></div>

    <script>
        const iconSizes = [
            { size: 72, name: 'icon-72x72.png' },
            { size: 96, name: 'icon-96x96.png' },
            { size: 128, name: 'icon-128x128.png' },
            { size: 144, name: 'icon-144x144.png' },
            { size: 152, name: 'icon-152x152.png' },
            { size: 167, name: 'icon-167x167.png' },
            { size: 180, name: 'icon-180x180.png' },
            { size: 192, name: 'icon-192x192.png' },
            { size: 384, name: 'icon-384x384.png' },
            { size: 512, name: 'icon-512x512.png' }
        ];

        const maskableIcons = [
            { size: 192, name: 'icon-192x192-maskable.png' },
            { size: 512, name: 'icon-512x512-maskable.png' }
        ];

        let generatedCanvases = {};

        function createTradeControlIcon(size, isMaskable = false) {
            const canvas = document.createElement('canvas');
            canvas.width = size;
            canvas.height = size;
            const ctx = canvas.getContext('2d');

            // TradeControl –¥–∏–∑–∞–π–Ω
            const colors = {
                background: '#1e293b',
                primary: '#3b82f6',
                accent: '#ffffff'
            };

            // –§–æ–Ω
            ctx.fillStyle = colors.background;
            ctx.fillRect(0, 0, size, size);

            // –î–ª—è maskable –∏–∫–æ–Ω–æ–∫ –¥–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è safe area
            const padding = isMaskable ? size * 0.2 : size * 0.125;
            const iconSize = size - (padding * 2);
            const cornerRadius = iconSize * 0.083;

            // –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫
            ctx.fillStyle = colors.primary;
            roundRect(ctx, padding, padding, iconSize, iconSize, cornerRadius);
            ctx.fill();

            // –¢–µ–∫—Å—Ç "TC"
            const fontSize = iconSize * 0.25;
            ctx.font = `bold ${fontSize}px Arial`;
            ctx.fillStyle = colors.accent;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            const centerX = size / 2;
            const centerY = size / 2 - fontSize * 0.05;
            ctx.fillText('TC', centerX, centerY);

            // –ü–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ
            const lineWidth = iconSize * 0.5;
            const lineHeight = Math.max(2, iconSize * 0.008);
            const lineY = centerY + fontSize * 0.4;
            
            ctx.fillStyle = colors.accent;
            roundRect(ctx, centerX - lineWidth/2, lineY, lineWidth, lineHeight, lineHeight/2);
            ctx.fill();

            return canvas;
        }

        function roundRect(ctx, x, y, width, height, radius) {
            ctx.beginPath();
            ctx.moveTo(x + radius, y);
            ctx.lineTo(x + width - radius, y);
            ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
            ctx.lineTo(x + width, y + height - radius);
            ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
            ctx.lineTo(x + radius, y + height);
            ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
            ctx.lineTo(x, y + radius);
            ctx.quadraticCurveTo(x, y, x + radius, y);
            ctx.closePath();
        }

        function generateAllIcons() {
            const container = document.getElementById('icons-container');
            container.innerHTML = '<h2>üì± –û–±—ã—á–Ω—ã–µ –∏–∫–æ–Ω–∫–∏:</h2>';
            
            // –°–æ–∑–¥–∞–µ–º –æ–±—ã—á–Ω—ã–µ –∏–∫–æ–Ω–∫–∏
            iconSizes.forEach(icon => {
                const canvas = createTradeControlIcon(icon.size, false);
                generatedCanvases[icon.name] = canvas;
                
                const div = document.createElement('div');
                div.className = 'canvas-container';
                div.innerHTML = `
                    <div>
                        <canvas class="preview" width="${icon.size}" height="${icon.size}"></canvas>
                        <br>
                        <strong>${icon.size}px</strong>
                        <br>
                        <button class="download-btn" onclick="downloadIcon('${icon.name}')">
                            üíæ ${icon.name}
                        </button>
                    </div>
                `;
                
                // –ö–æ–ø–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞ preview
                const previewCanvas = div.querySelector('canvas');
                const previewCtx = previewCanvas.getContext('2d');
                previewCtx.drawImage(canvas, 0, 0, icon.size, icon.size, 0, 0, previewCanvas.width, previewCanvas.height);
                
                container.appendChild(div);
            });

            // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è maskable
            const maskableTitle = document.createElement('h2');
            maskableTitle.textContent = 'üé≠ Maskable –∏–∫–æ–Ω–∫–∏:';
            container.appendChild(maskableTitle);
            
            // –°–æ–∑–¥–∞–µ–º maskable –∏–∫–æ–Ω–∫–∏
            maskableIcons.forEach(icon => {
                const canvas = createTradeControlIcon(icon.size, true);
                generatedCanvases[icon.name] = canvas;
                
                const div = document.createElement('div');
                div.className = 'canvas-container';
                div.innerHTML = `
                    <div>
                        <canvas class="preview" width="${icon.size}" height="${icon.size}"></canvas>
                        <br>
                        <strong>${icon.size}px Maskable</strong>
                        <br>
                        <button class="download-btn" onclick="downloadIcon('${icon.name}')">
                            üíæ ${icon.name}
                        </button>
                    </div>
                `;
                
                // –ö–æ–ø–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞ preview
                const previewCanvas = div.querySelector('canvas');
                const previewCtx = previewCanvas.getContext('2d');
                previewCtx.drawImage(canvas, 0, 0, icon.size, icon.size, 0, 0, previewCanvas.width, previewCanvas.height);
                
                container.appendChild(div);
            });

            console.log('‚úÖ –í—Å–µ PNG –∏–∫–æ–Ω–∫–∏ —Å–æ–∑–¥–∞–Ω—ã:', Object.keys(generatedCanvases));
        }

        function downloadIcon(filename) {
            const canvas = generatedCanvases[filename];
            if (!canvas) {
                console.error('Canvas –Ω–µ –Ω–∞–π–¥–µ–Ω –¥–ª—è:', filename);
                return;
            }

            canvas.toBlob(blob => {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                console.log('‚úÖ –°–∫–∞—á–∞–Ω:', filename);
            }, 'image/png');
        }

        function downloadAllIcons() {
            console.log('üì¶ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–∫–æ–Ω–æ–∫...');
            
            Object.keys(generatedCanvases).forEach((filename, index) => {
                setTimeout(() => {
                    downloadIcon(filename);
                }, index * 500); // –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É —Å–∫–∞—á–∏–≤–∞–Ω–∏—è–º–∏
            });
            
            alert(`üöÄ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ ${Object.keys(generatedCanvases).length} –∏–∫–æ–Ω–æ–∫ –Ω–∞—á–∞—Ç–æ!\\n\\n–ü–æ—Å–ª–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –ø–æ–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫—É public/`);
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ–º –∏–∫–æ–Ω–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            generateAllIcons();
        });
    </script>
</body>
</html>